"use strict";(self["webpackChunkadmin"]=self["webpackChunkadmin"]||[]).push([[550],{54455:function(e,s,t){t.r(s),t.d(s,{default:function(){return l}});var a=function(){var e=this,s=e._self._c;return s("div",{staticClass:"content-page"},[s("div",{staticClass:"content-nav"},[s("el-breadcrumb",{staticClass:"breadcrumb",attrs:{separator:"/"}},[s("el-breadcrumb-item",{attrs:{to:{name:"admin"}}},[e._v("管理员")]),s("el-breadcrumb-item",[e._v(e._s(e.infoForm.id?"编辑管理员":"添加管理员"))])],1),s("div",{staticClass:"operation-nav"},[s("el-button",{attrs:{type:"primary",icon:"arrow-left"},on:{click:e.goBackPage}},[e._v("返回列表")])],1)],1),s("div",{staticClass:"content-main"},[s("div",{staticClass:"form-table-box"},[s("el-form",{ref:"infoForm",attrs:{rules:e.infoRules,model:e.infoForm,"label-width":"120px"}},[s("el-form-item",{attrs:{label:"管理员用户名",prop:"username"}},[s("el-input",{model:{value:e.infoForm.username,callback:function(s){e.$set(e.infoForm,"username",s)},expression:"infoForm.username"}})],1),e.infoForm.id?s("el-form-item",{attrs:{label:"新密码",prop:"newpassword"}},[s("el-switch",{attrs:{"active-color":"#13ce66"},model:{value:e.change,callback:function(s){e.change=s},expression:"change"}})],1):e._e(),e.change?s("el-form-item",{attrs:{label:"",prop:"newpassword"}},[s("el-input",{attrs:{type:"password",placeholder:"输入新的密码"},model:{value:e.infoForm.newpassword,callback:function(s){e.$set(e.infoForm,"newpassword",s)},expression:"infoForm.newpassword"}})],1):e._e(),e.infoForm.id?e._e():s("el-form-item",{attrs:{label:"密码",prop:"password"}},[s("el-input",{attrs:{type:"password"},model:{value:e.infoForm.password,callback:function(s){e.$set(e.infoForm,"password",s)},expression:"infoForm.password"}})],1),s("el-form-item",[e.infoForm.id>0?s("el-button",{attrs:{type:"primary"},on:{click:e.saveAdminInfo}},[e._v("确定保存")]):s("el-button",{attrs:{type:"primary"},on:{click:e.addAdminInfo}},[e._v("确定添加")]),s("el-button",{on:{click:e.goBackPage}},[e._v("取消")])],1)],1)],1)])])},r=[],o=(t(57658),t(70636),{data(){return{change:!1,infoForm:{id:0,username:"",newpassword:"",password:""},infoRules:{username:[{required:!0,message:"请输入昵称",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}]}}},methods:{testa(){console.log(this.tableData),console.log(this.infoForm)},goBackPage(){this.$router.go(-1)},saveAdminInfo(){let e=this.infoForm;if(1==this.change){let s=e.newpassword;if(void 0==s&&(e.newpassword=""),void 0!=s&&s.replace(/(^\s*)|(\s*$)/g,"").length<6)return this.$message({type:"error",message:"密码请大于6个字符"}),!1}this.$refs["infoForm"].validate((s=>{if(!s)return!1;this.axios.post("admin/adminSave",{user:e,change:this.change}).then((e=>{0===e.data.errno?this.$message({type:"success",message:"保存成功"}):400===e.data.errno?this.$message({type:"error",message:e.data.errmsg}):this.$message({type:"error",message:"保存失败"})}))}))},addAdminInfo(){let e=this.infoForm,s=e.password;if(void 0==s&&(e.password=""),void 0!=s&&s.replace(/(^\s*)|(\s*$)/g,"").length<6)return this.$message({type:"error",message:"密码请大于6个字符"}),!1;this.$refs["infoForm"].validate((s=>{if(!s)return!1;this.axios.post("admin/adminAdd",{user:e}).then((e=>{0===e.data.errno?(this.$message({type:"success",message:"添加成功"}),this.$router.push({name:"admin"})):this.$message({type:"error",message:"添加失败"})}))}))},getInfo(){let e=this;this.axios.post("admin/adminDetail",{id:e.infoForm.id}).then((s=>{if(0===s.data.errno){let t=s.data.data;e.infoForm=t}}))}},components:{},mounted(){this.infoForm.id=this.$route.query.id||0,console.log(this.infoForm.id),this.getInfo()}}),i=o,n=t(1001),m=(0,n.Z)(i,a,r,!1,null,null,null),l=m.exports}}]);
//# sourceMappingURL=550.92e29b84.js.map