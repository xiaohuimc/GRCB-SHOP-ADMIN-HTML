{"version":3,"file":"js/553.55a93505.js","mappings":"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","sources":["webpack://admin/./src/components/GoodsGallery/GoodsGalleryEditPage.vue","webpack://admin/src/components/GoodsGallery/GoodsGalleryEditPage.vue","webpack://admin/./src/components/GoodsGallery/GoodsGalleryEditPage.vue?c8a7","webpack://admin/./src/components/GoodsGallery/GoodsGalleryEditPage.vue?4f84"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"com-image-drag\"},[_c('div',{staticClass:\"button-list\"},[(!_vm.drag_open)?_c('el-button',{staticClass:\"operation-success\",attrs:{\"disabled\":_vm.banner_list.length <= 1,\"type\":\"text\",\"size\":\"small\"},on:{\"click\":_vm.openDrag}}):_vm._e(),(_vm.drag_open)?_c('el-button',{staticClass:\"operation-success\",attrs:{\"type\":\"text\",\"size\":\"small\"},on:{\"click\":_vm.save}}):_vm._e(),(_vm.drag_open)?_c('el-button',{staticClass:\"operation-error\",attrs:{\"type\":\"text\",\"size\":\"small\"},on:{\"click\":_vm.cancle}}):_vm._e()],1),_c('div',{staticClass:\"image-list\"},[_c('div',{staticClass:\"list-wrap\"},[_c('draggable',{attrs:{\"options\":{\n\t\t\t\tanimation: 150,\n\t\t\t\tghostClass: 'sortable-ghost',\n\t\t\t\tchosenClass: 'chosenClass',\n\t\t\t\tscroll: true,\n\t\t\t\tscrollSensitivity: 200\n\t\t\t  }},model:{value:(_vm.banner_list),callback:function ($$v) {_vm.banner_list=$$v},expression:\"banner_list\"}},_vm._l((_vm.banner_list),function($item,$index){return _c('div',{key:$index,staticClass:\"image-item\",style:({ backgroundImage: `url(${$item.url})` })})}),0)],1),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.drag_open),expression:\"!drag_open\"}],staticClass:\"list-wrap\"},[_vm._l((_vm.banner_list),function($item,$index){return _c('div',{key:$index,staticClass:\"image-item\",style:({ backgroundImage: `url(${$item.url})` }),on:{\"mouseover\":function($event){$event.preventDefault();$item.is_hover = true},\"mouseleave\":function($event){$event.preventDefault();$item.is_hover = false}}},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(!$item.is_hover),expression:\"!$item.is_hover\"}],staticClass:\"label\"},[_c('i',{staticClass:\"el-icon-upload-success el-icon-check icon-success\"})])])}),_c('el-upload',{staticClass:\"upload-machine\",attrs:{\"list-type\":\"picture-card\",\"name\":\"file\",\"disabled\":_vm.drag_open,\"action\":\"https://up.qiniu.com/\",\"on-success\":_vm.onSuccess,\"before-upload\":_vm.beforeUpload,\"show-file-list\":false,\"multiple\":_vm.multiple,\"enctype\":\"multipart/form-data\"}})],2)])])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<!-- <template>\r\n    <div class=\"content-page\">\r\n        <div class=\"content-nav\">\r\n            <el-breadcrumb class=\"breadcrumb\" separator=\"/\">\r\n                <el-breadcrumb-item>编辑商品</el-breadcrumb-item>\r\n                <el-breadcrumb-item>轮播图顺序</el-breadcrumb-item>\r\n            </el-breadcrumb>\r\n            <div class=\"operation-nav\">\r\n                <el-button size=\"small\" type=\"primary\" @click=\"onSubmitInfo\">确定保存</el-button>\r\n                <el-button size=\"small\" @click=\"goBackPage\" icon=\"arrow-left\">返回列表</el-button>\r\n            </div>\r\n        </div>\r\n        <div class=\"content-main\">\r\n            <el-form ref=\"infoForm\" :model=\"infoForm\">\r\n                <el-form-item class=\"in-wrap\" label=\"图片\" v-for=\"item in infoForm.data\">\r\n                    <img class=\"img-wrap\" :src=\"item.img_url\" />\r\n                    <el-input class=\"input-wrap\" type=\"number\" size=\"small\" v-model=\"item.sort_order\"\r\n                              placeholder=\"\"></el-input>\r\n                </el-form-item>\r\n            </el-form>\r\n\r\n        </div>\r\n    </div>\r\n</template> -->\r\n\r\n<template>\r\n\t<div class=\"com-image-drag\">\r\n\t\t<div class=\"button-list\">\r\n\t\t\t<el-button @click=\"openDrag\" v-if=\"!drag_open\" :disabled=\"banner_list.length <= 1\" type=\"text\" size=\"small\" class=\"operation-success\"></el-button>\r\n\t\t\t<el-button @click=\"save\" v-if=\"drag_open\" type=\"text\" size=\"small\" class=\"operation-success\"></el-button>\r\n\t\t\t<el-button @click=\"cancle\" v-if=\"drag_open\" type=\"text\" size=\"small\" class=\"operation-error\"></el-button>\r\n\t\t</div>\r\n\t\t<div class=\"image-list\">\r\n\t\t\t<!-- 拖拽层 -->\r\n\t\t\t<div class=\"list-wrap\">\r\n\t\t\t\t<draggable v-model=\"banner_list\" :options=\"{\r\n\t\t\t\t\tanimation: 150,\r\n\t\t\t\t\tghostClass: 'sortable-ghost',\r\n\t\t\t\t\tchosenClass: 'chosenClass',\r\n\t\t\t\t\tscroll: true,\r\n\t\t\t\t\tscrollSensitivity: 200\r\n\t\t\t\t  }\">\r\n\t\t\t\t<div class=\"image-item\" v-for=\"($item, $index) in banner_list\" :key=\"$index\" :style=\"{ backgroundImage: `url(${$item.url})` }\"></div>\r\n\t\t\t\t</draggable>\r\n\t\t\t</div>\r\n\t\t\t<!-- 展示层 -->\r\n\t\t\t<div class=\"list-wrap\" v-show=\"!drag_open\">\r\n\t\t\t\t<div class=\"image-item\" v-for=\"($item, $index) in banner_list\" :key=\"$index\" :style=\"{ backgroundImage: `url(${$item.url})` }\"\r\n\t\t\t\t @mouseover.prevent=\"$item.is_hover = true\" @mouseleave.prevent=\"$item.is_hover = false\">\r\n\t\t\t\t\t<div class=\"label\" v-show=\"!$item.is_hover\">\r\n\t\t\t\t\t\t<i class=\"el-icon-upload-success el-icon-check icon-success\"></i>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<el-upload list-type=\"picture-card\" name=\"file\" class=\"upload-machine\" :disabled=\"drag_open\" action=\"https://up.qiniu.com/\"\r\n\t\t\t\t :on-success=\"onSuccess\" :before-upload=\"beforeUpload\" :show-file-list=\"false\" :multiple=\"multiple\" enctype=\"multipart/form-data\"></el-upload>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\n\timport api from '@/config/api';\r\n\timport draggable from \"vuedraggable\";\r\n\texport default {\r\n\t\tprops: {\r\n\t\t\tlist: {\r\n\t\t\t\ttype: Array\r\n\t\t\t},\r\n\t\t\tlimit: {\r\n\t\t\t\ttype: Number,\r\n\t\t\t\tdefault: 0\r\n\t\t\t},\r\n\t\t\tmultiple: {\r\n\t\t\t\ttype: Boolean,\r\n\t\t\t\tdefault: false\r\n\t\t\t},\r\n\t\t\taction: {\r\n\t\t\t\ttype: Function,\r\n\t\t\t\tdefault: () => {}\r\n\t\t\t},\r\n\t\t\tbeforeUpload: {\r\n\t\t\t\ttype: Function,\r\n\t\t\t\tdefault: () => {}\r\n\t\t\t},\r\n\t\t\tonError: {\r\n\t\t\t\ttype: Function,\r\n\t\t\t\tdefault: () => {}\r\n\t\t\t},\r\n\t\t\tonSuccess: {\r\n\t\t\t\ttype: Function,\r\n\t\t\t\tdefault: () => {}\r\n\t\t\t}\r\n\t\t},\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tbanner_list: [], //拖拽插件不建议直接改变父组件的传值，所以另建一个新数组\r\n\t\t\t\tfile_list: [], //保存开启拖拽之前排序的数组\r\n\t\t\t\tdrag_open: false, //拖拽开启开关,\r\n\t\t\t\tinfoForm: {}\r\n\t\t\t}\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\t// goBack(){\r\n\t\t\t// \tthis.$router.push({name: 'goods_add', query: {id: infoForm.id}})\r\n\t\t\t// },\r\n\t\t\t//          test() {\r\n\t\t\t//              console.log(this.infoForm);\r\n\t\t\t//          },\r\n\t\t\t//          onSubmitInfo() {\r\n\t\t\t//              this.axios.post('goods/galleryEdit', this.infoForm).then((response) => {\r\n\t\t\t//                  if (response.data.errno === 0) {\r\n\t\t\t//                      this.$message({\r\n\t\t\t//                          type: 'success',\r\n\t\t\t//                          message: '保存成功'\r\n\t\t\t//                      });\r\n\t\t\t//                  } else {\r\n\t\t\t//                      this.$message({\r\n\t\t\t//                          type: 'error',\r\n\t\t\t//                          message: '保存失败'\r\n\t\t\t//                      })\r\n\t\t\t//                  }\r\n\t\t\t//              })\r\n\t\t\t//          },\r\n\t\t\t//          goBackPage() {\r\n\t\t\t//              this.$router.go(-1);\r\n\t\t\t//          },\r\n\t\t\t//          getInfo() {\r\n\t\t\t//              console.log(this.infoForm.id)\r\n\t\t\t//              if (this.infoForm.id <= 0) {\r\n\t\t\t//                  return false\r\n\t\t\t//              }\r\n\t\t\t//              let that = this\r\n\t\t\t//              this.axios.get('goods/galleryList', {\r\n\t\t\t//                  params: {\r\n\t\t\t//                      id: that.infoForm.id\r\n\t\t\t//                  }\r\n\t\t\t//              }).then((response) => {\r\n\t\t\t//                  console.log(response.data);\r\n\t\t\t//                  that.infoForm = response.data;\r\n\t\t\t//              })\r\n\t\t\t//          }\r\n\r\n\t\t\tgetInfo() {\r\n\t\t\t\tconsole.log(this.infoForm.id)\r\n\t\t\t\tif (this.infoForm.id <= 0) {\r\n\t\t\t\t\treturn false\r\n\t\t\t\t}\r\n\t\t\t\tlet that = this\r\n\t\t\t\tthis.axios.get('goods/galleryList', {\r\n\t\t\t\t\tparams: {\r\n\t\t\t\t\t\tid: that.infoForm.id\r\n\t\t\t\t\t}\r\n\t\t\t\t}).then((response) => {\r\n\t\t\t\t\tconsole.log(response.data);\r\n\r\n\t\t\t\t\tthat.infoForm = response.data;\r\n\t\t\t\t\t// console.log(api)\r\n\t\t\t\t\tthat.banner_list = that.infoForm.data.map(function(v) {\r\n\t\t\t\t\t\tlet obj = {\r\n\t\t\t\t\t\t\turl: v.img_url,\r\n\t\t\t\t\t\t\tis_hover: false\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t\treturn obj;\r\n\t\t\t\t\t});\r\n\t\t\t\t})\r\n\t\t\t},\r\n\r\n\t\t\t// 开启拖拽\r\n\t\t\topenDrag() {\r\n\t\t\t\tthis.file_list = JSON.parse(JSON.stringify(this.banner_list)); //数组深拷贝\r\n\t\t\t\tthis.drag_open = true;\r\n\t\t\t},\r\n\t\t\t// 取消拖拽\r\n\t\t\tcancle() {\r\n\t\t\t\tthis.banner_list = this.file_list;\r\n\t\t\t\tthis.drag_open = false;\r\n\t\t\t},\r\n\t\t\t// 拖拽保存\r\n\t\t\tsave() {\r\n\t\t\t\tthis.drag_open = false;\r\n\t\t\t}\r\n\t\t},\r\n\t\tcomponents: {\r\n\t\t\tdraggable\r\n\t\t},\r\n\t\tmounted() {\r\n\t\t\tthis.infoForm.id = this.$route.query.id || 0;\r\n\t\t\tthis.getInfo();\r\n\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style scoped>\n\t.image-item{\n\t\twidth: 200px;\n\t\theight: 200px;\n\t}\r\n\t.in-wrap {\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: flex-start;\r\n\t\talign-items: center;\r\n\t\tmargin-left: 0;\r\n\t}\r\n\r\n\t.img-wrap {\r\n\t\tfloat: left;\r\n\t\twidth: 100px;\r\n\t\theight: 100px;\r\n\t}\r\n\r\n\t.input-wrap {\r\n\t\twidth: 100px;\r\n\t\tfloat: left;\r\n\t\tmargin-left: 30px;\r\n\t\tmargin-top: 30px;\r\n\t}\r\n</style>\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./GoodsGalleryEditPage.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./GoodsGalleryEditPage.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./GoodsGalleryEditPage.vue?vue&type=template&id=43ef5591&scoped=true&\"\nimport script from \"./GoodsGalleryEditPage.vue?vue&type=script&lang=js&\"\nexport * from \"./GoodsGalleryEditPage.vue?vue&type=script&lang=js&\"\nimport style0 from \"./GoodsGalleryEditPage.vue?vue&type=style&index=0&id=43ef5591&prod&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"43ef5591\",\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_c","_self","staticClass","drag_open","_e","attrs","banner_list","length","on","openDrag","save","cancle","animation","ghostClass","chosenClass","scroll","scrollSensitivity","model","value","callback","$$v","expression","_l","$item","$index","key","style","backgroundImage","url","directives","name","rawName","$event","preventDefault","is_hover","onSuccess","beforeUpload","multiple","staticRenderFns","props","list","type","Array","limit","Number","default","Boolean","action","Function","onError","data","file_list","infoForm","methods","getInfo","console","log","id","that","axios","get","params","then","response","map","v","obj","img_url","JSON","parse","stringify","components","draggable","mounted","$route","query","component"],"sourceRoot":""}