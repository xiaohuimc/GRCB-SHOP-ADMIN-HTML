{"version":3,"file":"js/229.798c22eb.js","mappings":"uJAAA,IAAIA,EAAS,WAAkB,IAAIC,EAAIC,KAAKC,EAAGF,EAAIG,MAAMD,GAAG,OAAOA,EAAG,MAAM,CAACE,YAAY,gBAAgB,CAACF,EAAG,MAAM,CAACE,YAAY,eAAe,CAACF,EAAG,gBAAgB,CAACE,YAAY,aAAaC,MAAM,CAAC,UAAY,MAAM,CAACH,EAAG,qBAAqB,CAACG,MAAM,CAAC,GAAK,CAAEC,KAAM,QAAS,CAACN,EAAIO,GAAG,UAAUL,EAAG,qBAAqB,CAACF,EAAIO,GAAGP,EAAIQ,GAAGR,EAAIS,SAASC,GAAK,OAAS,YAAY,GAAGR,EAAG,MAAM,CAACE,YAAY,iBAAiB,CAACF,EAAG,YAAY,CAACG,MAAM,CAAC,KAAO,UAAU,KAAO,cAAcM,GAAG,CAAC,MAAQX,EAAIY,aAAa,CAACZ,EAAIO,GAAG,WAAW,IAAI,GAAGL,EAAG,MAAM,CAACE,YAAY,gBAAgB,CAACF,EAAG,MAAM,CAACE,YAAY,kBAAkB,CAACF,EAAG,UAAU,CAACW,IAAI,WAAWR,MAAM,CAAC,MAAQL,EAAIc,UAAU,MAAQd,EAAIS,SAAS,cAAc,UAAU,CAAET,EAAIS,SAASM,UAAWb,EAAG,eAAe,CAACE,YAAY,gCAAgCC,MAAM,CAAC,MAAQ,OAAO,KAAO,cAAc,CAACH,EAAG,MAAM,CAACE,YAAY,eAAe,CAAEJ,EAAIS,SAASM,UAAWb,EAAG,WAAW,CAACE,YAAY,aAAaC,MAAM,CAAC,mBAAmBL,EAAIgB,YAAY,IAAMhB,EAAIS,SAASM,UAAU,IAAM,SAASJ,GAAG,CAAC,MAAQX,EAAIiB,mBAAmBjB,EAAIkB,KAAKhB,EAAG,MAAM,CAACE,YAAY,WAAWO,GAAG,CAAC,MAAQX,EAAImB,cAAc,CAACjB,EAAG,IAAI,CAACE,YAAY,sBAAsB,KAAKJ,EAAIkB,KAAOlB,EAAIS,SAASM,UAA0gBf,EAAIkB,KAAngBhB,EAAG,eAAe,CAACG,MAAM,CAAC,MAAQ,OAAO,KAAO,cAAc,CAACH,EAAG,YAAY,CAACW,IAAI,SAAST,YAAY,cAAcC,MAAM,CAAC,KAAO,OAAO,OAASL,EAAIoB,UAAU,aAAapB,EAAIqB,cAAc,gBAAgBrB,EAAIsB,cAAc,eAAc,EAAK,YAAY,eAAe,KAAOtB,EAAIuB,QAAQ,eAAevB,EAAIwB,iBAAiB,CAACtB,EAAG,YAAY,CAACG,MAAM,CAAC,KAAO,QAAQ,KAAO,YAAY,CAACL,EAAIO,GAAG,UAAUL,EAAG,MAAM,CAACE,YAAY,iBAAiBC,MAAM,CAAC,KAAO,OAAOoB,KAAK,OAAO,CAACzB,EAAIO,GAAG,oBAAoB,IAAI,GAAYL,EAAG,eAAe,CAACG,MAAM,CAAC,MAAQ,SAAS,CAACH,EAAG,iBAAiB,CAACwB,MAAM,CAACC,MAAO3B,EAAIS,SAASmB,UAAWC,SAAS,SAAUC,GAAM9B,EAAI+B,KAAK/B,EAAIS,SAAU,YAAaqB,EAAI,EAAEE,WAAW,uBAAuB,CAAC9B,EAAG,WAAW,CAACG,MAAM,CAAC,MAAQ,IAAI,CAACL,EAAIO,GAAG,UAAUL,EAAG,WAAW,CAACG,MAAM,CAAC,MAAQ,IAAI,CAACL,EAAIO,GAAG,SAAS,IAAI,GAA8B,GAA1BP,EAAIS,SAASmB,UAAgB1B,EAAG,eAAe,CAACG,MAAM,CAAC,MAAQ,OAAO,KAAO,SAAS,CAACH,EAAG,WAAW,CAACE,YAAY,aAAasB,MAAM,CAACC,MAAO3B,EAAIS,SAASwB,KAAMJ,SAAS,SAAUC,GAAM9B,EAAI+B,KAAK/B,EAAIS,SAAU,OAAQqB,EAAI,EAAEE,WAAW,oBAAoB,GAAGhC,EAAIkB,KAAgC,GAA1BlB,EAAIS,SAASmB,UAAgB1B,EAAG,eAAe,CAACG,MAAM,CAAC,MAAQ,OAAO,KAAO,SAAS,CAACH,EAAG,WAAW,CAACE,YAAY,WAAWsB,MAAM,CAACC,MAAO3B,EAAIS,SAASyB,SAAUL,SAAS,SAAUC,GAAM9B,EAAI+B,KAAK/B,EAAIS,SAAU,WAAYqB,EAAI,EAAEE,WAAW,uBAAuB9B,EAAG,aAAa,CAACG,MAAM,CAAC,UAAY,SAASqB,MAAM,CAACC,MAAO3B,EAAImC,YAAaN,SAAS,SAAUC,GAAM9B,EAAImC,YAAYL,CAAG,EAAEE,WAAW,gBAAgB,CAAC9B,EAAG,WAAW,CAACkC,YAAY,CAAC,MAAQ,QAAQ/B,MAAM,CAAC,KAAOL,EAAIqC,kBAAkB,OAAS,KAAK,CAACnC,EAAG,kBAAkB,CAACG,MAAM,CAAC,KAAO,KAAK,MAAQ,KAAK,MAAQ,SAASH,EAAG,kBAAkB,CAACG,MAAM,CAAC,KAAO,eAAe,MAAQ,OAAO,MAAQ,OAAOiC,YAAYtC,EAAIuC,GAAG,CAAC,CAACC,IAAI,UAAUC,GAAG,SAASC,GAAO,MAAO,CAACxC,EAAG,MAAM,CAACkC,YAAY,CAAC,MAAQ,OAAO,OAAS,QAAQ/B,MAAM,CAAC,IAAMqC,EAAMC,IAAIC,aAAa,IAAM,MAAM,IAAI,MAAK,EAAM,cAAc1C,EAAG,kBAAkB,CAACG,MAAM,CAAC,KAAO,OAAO,MAAQ,OAAO,MAAQ,WAAWH,EAAG,kBAAkB,CAACG,MAAM,CAAC,MAAQ,MAAMiC,YAAYtC,EAAIuC,GAAG,CAAC,CAACC,IAAI,UAAUC,GAAG,SAASC,GAAO,MAAO,CAACxC,EAAG,YAAY,CAACG,MAAM,CAAC,KAAO,QAAQ,KAAO,UAAUM,GAAG,CAAC,MAAQ,SAASkC,GAAQ,OAAO7C,EAAI8C,aAAaJ,EAAMC,IAAIjC,GAAG,IAAI,CAACV,EAAIO,GAAG,SAAS,IAAI,MAAK,EAAM,eAAe,GAAGL,EAAG,YAAY,CAACG,MAAM,CAAC,KAAO,YAAY,KAAO,WAAWM,GAAG,CAAC,MAAQX,EAAI+C,kBAAkBtB,KAAK,aAAa,CAACzB,EAAIO,GAAG,aAAa,IAAI,GAAGP,EAAIkB,KAAKhB,EAAG,eAAe,CAACG,MAAM,CAAC,MAAQ,OAAO,KAAO,aAAa,CAACH,EAAG,iBAAiB,CAACG,MAAM,CAAC,KAAO,WAAW,YAAc,OAAO,eAAe,YAAYqB,MAAM,CAACC,MAAO3B,EAAIS,SAASuC,SAAUnB,SAAS,SAAUC,GAAM9B,EAAI+B,KAAK/B,EAAIS,SAAU,WAAYqB,EAAI,EAAEE,WAAW,sBAAsB,CAAChC,EAAIO,GAAG,UAAU,GAAGL,EAAG,eAAe,CAACG,MAAM,CAAC,MAAQ,KAAK,KAAO,eAAe,CAACH,EAAG,kBAAkB,CAACG,MAAM,CAAC,IAAM,EAAE,IAAM,KAAKqB,MAAM,CAACC,MAAO3B,EAAIS,SAASwC,WAAYpB,SAAS,SAAUC,GAAM9B,EAAI+B,KAAK/B,EAAIS,SAAU,aAAcqB,EAAI,EAAEE,WAAW,0BAA0B,GAAG9B,EAAG,eAAe,CAACG,MAAM,CAAC,MAAQ,SAAS,CAACH,EAAG,YAAY,CAACG,MAAM,CAAC,eAAe,IAAI,iBAAiB,KAAKqB,MAAM,CAACC,MAAO3B,EAAIS,SAASyC,QAASrB,SAAS,SAAUC,GAAM9B,EAAI+B,KAAK/B,EAAIS,SAAU,UAAWqB,EAAI,EAAEE,WAAW,uBAAuB,GAAG9B,EAAG,eAAe,CAACA,EAAG,YAAY,CAACG,MAAM,CAAC,KAAO,WAAWM,GAAG,CAAC,MAAQX,EAAImD,eAAe,CAACnD,EAAIO,GAAG,UAAUL,EAAG,YAAY,CAACS,GAAG,CAAC,MAAQX,EAAIY,aAAa,CAACZ,EAAIO,GAAG,SAAS,IAAI,IAAI,MACnkJ,EACI6C,EAAkB,G,8DC8FtB,GACAC,OACA,OACAjC,UAAA,GACAkC,KAAA,GACAC,SAAA,GACA9C,SAAA,CACAC,GAAA,EACAK,UAAA,GACAa,UAAA,EACAsB,QAAA,EACAF,SAAA,GACAd,SAAA,EACAD,KAAA,IAEAnB,UAAA,CACAC,UAAA,CACA,CAAAyC,UAAA,EAAAC,QAAA,UAAAC,QAAA,SAEAV,SAAA,CACA,CAAAQ,UAAA,EAAAC,QAAA,QAAAC,QAAA,UAGAnC,QAAA,CACAoC,MAAA,IAEAC,IAAA,GACAvB,kBAAA,GACAF,aAAA,EACAnB,YAAA,GAEA,EACA6C,QAAA,CACAxC,gBAAA,EACAJ,kBACA,IAAA6C,EAAA,KACAA,EAAA9C,YAAA,GACA8C,EAAA9C,YAAA+C,KAAAD,EAAArD,SAAAM,UACA,EACAI,cACA,IAAA2C,EAAA,KACAA,EAAAE,SAAA,iBACAC,kBAAA,KACAC,iBAAA,KACAC,KAAA,YAEAC,MAAA,KACAN,EAAArD,SAAAM,UAAA,MAEAsD,OAAA,QACA,EACA7C,eAAA8C,GACA,MAAAC,EAAAD,EAAAC,KACAC,IAAAD,GAAAH,MAAAK,IACA,MAAAC,EAAA,CACAC,QAAA,CACA,uCAGAC,EAAAC,MAAAC,OAAA,qBAAAC,KAAAC,MAAA,IAAAD,KAAAE,UAAAV,EAAAjE,KACA4E,EAAA,IAAAC,SACAD,EAAAE,OAAA,OAAAX,EAAAF,MACAW,EAAAE,OAAA,aAAA7D,QAAAoC,OACAuB,EAAAE,OAAA,MAAAR,GACA,KAAAS,MAAAC,KAAA,KAAAlE,UAAA8D,EAAAR,GAAAN,MAAAmB,IACA,KAAAC,yBAAAD,EAAAlC,KAAA,GACA,IACAgB,OAAA,SAAAoB,GACAC,QAAAC,IAAAF,EACA,GACA,EACAD,yBAAAD,EAAAhB,GACA,IAAAX,EAAA,KAAAA,IACA,KAAAnD,SAAAM,UAAA6C,EAAA2B,EAAA/C,GACA,EACAM,aAAApC,GACAgF,QAAAC,IAAAjF,GACA,KAAAD,SAAAyB,SAAAxB,EACA,KAAAyB,aAAA,CACA,EACAY,mBACA,KAAA6C,MAAAN,KAAA,mBAAA5E,GAAA,KAAAD,SAAAC,KAAA0D,MAAAyB,IACA,IAAAA,EAAAxC,KAAAyC,QACA,KAAAzD,kBAAAwD,EAAAxC,KAAAA,KACA,GAEA,EACA0C,OACAL,QAAAC,IAAA,KAAAlF,SAAAuC,SACA,EACAgD,iBACA,YAAAhC,SAAA,QACA,EACAiC,SAAA1B,EAAAhB,GACA,KAAA9C,SAAAM,UAAA,EACA,EACAO,gBACA,IAAAwC,EAAA,KACA,KAAA8B,MAAAN,KAAA,uBAAAlB,MAAAyB,IACA,IAAAK,EAAAL,EAAAxC,KAAAA,KACAqC,QAAAC,IAAAO,GACApC,EAAAvC,QAAAoC,MAAAuC,EAAAvC,MACAG,EAAAF,IAAAsC,EAAAtC,GAAA,GAEA,EACAhD,aACA,KAAAuF,QAAAC,IAAA,EACA,EACAjD,eACAuC,QAAAC,IAAA,KAAAlF,UAEA,IAAA4F,EAAA,KAAA5F,SAAAuC,SACA,UAAAqD,GACA,KAAAC,SAAA,CACAnC,KAAA,QACAV,QAAA,WAEA,GAEA,QAAAhD,SAAAmB,WACA,QAAAnB,SAAAyB,UACA,KAAAoE,SAAA,CACAnC,KAAA,QACAV,QAAA,WAEA,GAGA,QAAAhD,SAAAmB,WACA,SAAAnB,SAAAwB,MACA,KAAAqE,SAAA,CACAnC,KAAA,QACAV,QAAA,WAEA,QAGA,KAAA8C,MAAA,YAAAC,UAAAC,IACA,IAAAA,EAsBA,SArBA,KAAAb,MAAAN,KAAA,gBAAA7E,UAAA2D,MAAAyB,IACA,IAAAA,EAAAxC,KAAAyC,OACA,KAAAQ,SAAA,CACAnC,KAAA,UACAV,QAAA,SAEA,KAAA0C,QAAAC,IAAA,IACA,MAAAP,EAAAxC,KAAAyC,MACA,KAAAQ,SAAA,CACAnC,KAAA,QACAV,QAAA,eAIA,KAAA6C,SAAA,CACAnC,KAAA,QACAV,QAAA,QAEA,GAIA,GAEA,EACAiD,UACA,QAAAjG,SAAAC,IAAA,EACA,SAGA,IAAAoD,EAAA,KACA,KAAA8B,MAAAe,IAAA,WACAC,OAAA,CACAlG,GAAAoD,EAAArD,SAAAC,MAEA0D,MAAAyB,IACA,IAAAK,EAAAL,EAAAxC,KAAAA,KACA6C,EAAAhD,QAAAgD,EAAAhD,QAAA,QACAY,EAAArD,SAAAyF,EACApC,EAAArD,SAAAuC,SAAA,IAAAkD,EAAAlD,SACA,IAAA6D,EAAA,CACAvG,KAAA4F,EAAA5F,KACAsD,IAAAsC,EAAAnF,WAEA,KAAAwC,SAAAQ,KAAA8C,GACAnB,QAAAC,IAAA,KAAAlF,SAAA,GAEA,GAEAqG,WAAA,GACAC,UACA,KAAAtG,SAAAC,GAAA,KAAAsG,OAAAC,MAAAvG,IAAA,EACA,KAAAgG,UACA,KAAApD,KAAA4D,EAAAA,EAAAC,QACA,KAAA7F,gBACA,KAAAF,UAAA8F,EAAAA,EAAAE,KACA,GCnSkQ,I,UCQ9PC,GAAY,OACd,EACAtH,EACAqD,GACA,EACA,KACA,WACA,MAIF,EAAeiE,EAAiB,O","sources":["webpack://admin/./src/components/Ad/AdAddPage.vue","webpack://admin/src/components/Ad/AdAddPage.vue","webpack://admin/./src/components/Ad/AdAddPage.vue?cb7a","webpack://admin/./src/components/Ad/AdAddPage.vue?17c5"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"content-page\"},[_c('div',{staticClass:\"content-nav\"},[_c('el-breadcrumb',{staticClass:\"breadcrumb\",attrs:{\"separator\":\"/\"}},[_c('el-breadcrumb-item',{attrs:{\"to\":{ name: 'ad' }}},[_vm._v(\"广告列表\")]),_c('el-breadcrumb-item',[_vm._v(_vm._s(_vm.infoForm.id ? '编辑广告' : '添加广告'))])],1),_c('div',{staticClass:\"operation-nav\"},[_c('el-button',{attrs:{\"type\":\"primary\",\"icon\":\"arrow-left\"},on:{\"click\":_vm.goBackPage}},[_vm._v(\"返回列表\")])],1)],1),_c('div',{staticClass:\"content-main\"},[_c('div',{staticClass:\"form-table-box\"},[_c('el-form',{ref:\"infoForm\",attrs:{\"rules\":_vm.infoRules,\"model\":_vm.infoForm,\"label-width\":\"120px\"}},[(_vm.infoForm.image_url)?_c('el-form-item',{staticClass:\"image-uploader-diy new-height\",attrs:{\"label\":\"广告图片\",\"prop\":\"image_url\"}},[_c('div',{staticClass:\"index-image\"},[(_vm.infoForm.image_url)?_c('el-image',{staticClass:\"image-show\",attrs:{\"preview-src-list\":_vm.previewList,\"src\":_vm.infoForm.image_url,\"fit\":\"cover\"},on:{\"click\":_vm.previewIndexImg}}):_vm._e(),_c('div',{staticClass:\"o-shadow\",on:{\"click\":_vm.delePicList}},[_c('i',{staticClass:\"el-icon-delete\"})])],1)]):_vm._e(),(!_vm.infoForm.image_url)?_c('el-form-item',{attrs:{\"label\":\"广告图片\",\"prop\":\"image_url\"}},[_c('el-upload',{ref:\"upload\",staticClass:\"upload-demo\",attrs:{\"name\":\"file\",\"action\":_vm.qiniuZone,\"on-success\":_vm.handleSuccess,\"before-upload\":_vm.getQiniuToken,\"auto-upload\":true,\"list-type\":\"picture-card\",\"data\":_vm.picData,\"http-request\":_vm.uploadIndexImg}},[_c('el-button',{attrs:{\"size\":\"small\",\"type\":\"primary\"}},[_vm._v(\"点击上传\")]),_c('div',{staticClass:\"el-upload__tip\",attrs:{\"slot\":\"tip\"},slot:\"tip\"},[_vm._v(\"只能上传jpg/png文件\")])],1)],1):_vm._e(),_c('el-form-item',{attrs:{\"label\":\"商品类型\"}},[_c('el-radio-group',{model:{value:(_vm.infoForm.link_type),callback:function ($$v) {_vm.$set(_vm.infoForm, \"link_type\", $$v)},expression:\"infoForm.link_type\"}},[_c('el-radio',{attrs:{\"label\":0}},[_vm._v(\"商品id\")]),_c('el-radio',{attrs:{\"label\":1}},[_vm._v(\"链接\")])],1)],1),(_vm.infoForm.link_type == 1)?_c('el-form-item',{attrs:{\"label\":\"广告链接\",\"prop\":\"link\"}},[_c('el-input',{staticClass:\"link-input\",model:{value:(_vm.infoForm.link),callback:function ($$v) {_vm.$set(_vm.infoForm, \"link\", $$v)},expression:\"infoForm.link\"}})],1):_vm._e(),(_vm.infoForm.link_type == 0)?_c('el-form-item',{attrs:{\"label\":\"商品id\",\"prop\":\"link\"}},[_c('el-input',{staticClass:\"id-input\",model:{value:(_vm.infoForm.goods_id),callback:function ($$v) {_vm.$set(_vm.infoForm, \"goods_id\", $$v)},expression:\"infoForm.goods_id\"}}),_c('el-popover',{attrs:{\"placement\":\"right\"},model:{value:(_vm.related_pop),callback:function ($$v) {_vm.related_pop=$$v},expression:\"related_pop\"}},[_c('el-table',{staticStyle:{\"width\":\"100%\"},attrs:{\"data\":_vm.chooseRelateGoods,\"stripe\":\"\"}},[_c('el-table-column',{attrs:{\"prop\":\"id\",\"label\":\"id\",\"width\":\"100\"}}),_c('el-table-column',{attrs:{\"prop\":\"list_pic_url\",\"label\":\"商品图片\",\"width\":\"120\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('img',{staticStyle:{\"width\":\"40px\",\"height\":\"40px\"},attrs:{\"src\":scope.row.list_pic_url,\"alt\":\"\"}})]}}],null,false,2827108702)}),_c('el-table-column',{attrs:{\"prop\":\"name\",\"label\":\"商品名称\",\"width\":\"300px\"}}),_c('el-table-column',{attrs:{\"label\":\"操作\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-button',{attrs:{\"size\":\"small\",\"type\":\"danger\"},on:{\"click\":function($event){return _vm.relateSelect(scope.row.id)}}},[_vm._v(\"选择 \")])]}}],null,false,1421910715)})],1),_c('el-button',{attrs:{\"slot\":\"reference\",\"type\":\"primary\"},on:{\"click\":_vm.relateGoodsClick},slot:\"reference\"},[_vm._v(\"添加关联商品\")])],1)],1):_vm._e(),_c('el-form-item',{attrs:{\"label\":\"结束时间\",\"prop\":\"end_time\"}},[_c('el-date-picker',{attrs:{\"type\":\"datetime\",\"placeholder\":\"选择日期\",\"default-time\":\"23:59:59\"},model:{value:(_vm.infoForm.end_time),callback:function ($$v) {_vm.$set(_vm.infoForm, \"end_time\", $$v)},expression:\"infoForm.end_time\"}},[_vm._v(\" > \")])],1),_c('el-form-item',{attrs:{\"label\":\"排序\",\"prop\":\"sort_order\"}},[_c('el-input-number',{attrs:{\"min\":1,\"max\":999},model:{value:(_vm.infoForm.sort_order),callback:function ($$v) {_vm.$set(_vm.infoForm, \"sort_order\", $$v)},expression:\"infoForm.sort_order\"}})],1),_c('el-form-item',{attrs:{\"label\":\"广告启用\"}},[_c('el-switch',{attrs:{\"active-value\":\"1\",\"inactive-value\":\"0\"},model:{value:(_vm.infoForm.enabled),callback:function ($$v) {_vm.$set(_vm.infoForm, \"enabled\", $$v)},expression:\"infoForm.enabled\"}})],1),_c('el-form-item',[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.onSubmitInfo}},[_vm._v(\"确定保存\")]),_c('el-button',{on:{\"click\":_vm.goBackPage}},[_vm._v(\"取消\")])],1)],1)],1)])])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <div class=\"content-page\">\n        <div class=\"content-nav\">\n            <el-breadcrumb class=\"breadcrumb\" separator=\"/\">\n                <el-breadcrumb-item :to=\"{ name: 'ad' }\">广告列表</el-breadcrumb-item>\n                <el-breadcrumb-item>{{infoForm.id ? '编辑广告' : '添加广告'}}</el-breadcrumb-item>\n            </el-breadcrumb>\n            <div class=\"operation-nav\">\n                <!--<el-button type=\"primary\" @click=\"test\" icon=\"arrow-left\">test</el-button>-->\n                <el-button type=\"primary\" @click=\"goBackPage\" icon=\"arrow-left\">返回列表</el-button>\n            </div>\n        </div>\n        <div class=\"content-main\">\n            <div class=\"form-table-box\">\n                <el-form ref=\"infoForm\" :rules=\"infoRules\" :model=\"infoForm\" label-width=\"120px\">\n\t\t\t\t\t<el-form-item label=\"广告图片\" prop=\"image_url\" v-if=\"infoForm.image_url\" class=\"image-uploader-diy new-height\">\n\t\t\t\t\t\t<div class=\"index-image\">\n\t\t\t\t\t\t\t<el-image :preview-src-list=\"previewList\" v-if=\"infoForm.image_url\" :src=\"infoForm.image_url\" @click=\"previewIndexImg\"\n\t\t\t\t\t\t\t class=\"image-show\" fit=\"cover\"></el-image>\n\t\t\t\t\t\t\t<div class=\"o-shadow\" @click=\"delePicList\">\n\t\t\t\t\t\t\t\t<i class=\"el-icon-delete\"></i>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</el-form-item>\n\t\t\t\t\t<el-form-item label=\"广告图片\" prop=\"image_url\" v-if=\"!infoForm.image_url\">\n\t\t\t\t\t\t<el-upload name=\"file\" ref=\"upload\" class=\"upload-demo\" :action=\"qiniuZone\" :on-success=\"handleSuccess\"\n\t\t\t\t\t\t :before-upload=\"getQiniuToken\" :auto-upload=\"true\" list-type=\"picture-card\" :data=\"picData\" :http-request=\"uploadIndexImg\">\n\t\t\t\t\t\t\t<el-button size=\"small\" type=\"primary\">点击上传</el-button>\n\t\t\t\t\t\t\t<div slot=\"tip\" class=\"el-upload__tip\">只能上传jpg/png文件</div>\n\t\t\t\t\t\t</el-upload>\n\t\t\t\t\t</el-form-item>\n                    <el-form-item label=\"商品类型\">\n                        <el-radio-group v-model=\"infoForm.link_type\">\n                            <el-radio :label=\"0\">商品id</el-radio>\n                            <el-radio :label=\"1\">链接</el-radio>\n                        </el-radio-group>\n                    </el-form-item>\n                    <el-form-item label=\"广告链接\" prop=\"link\" v-if=\"infoForm.link_type == 1\">\n                        <el-input class=\"link-input\" v-model=\"infoForm.link\"></el-input>\n                    </el-form-item>\n                    <el-form-item label=\"商品id\" prop=\"link\" v-if=\"infoForm.link_type == 0\">\n                        <el-input class=\"id-input\" v-model=\"infoForm.goods_id\"></el-input>\n                        <el-popover\n                                placement=\"right\"\n                                v-model=\"related_pop\"\n                        >\n                            <el-table :data=\"chooseRelateGoods\" stripe style=\"width: 100%\">\n                                <el-table-column prop=\"id\" label=\"id\" width=\"100\"></el-table-column>\n                                <el-table-column prop=\"list_pic_url\" label=\"商品图片\" width=\"120\">\n                                    <template scope=\"scope\">\n                                        <img :src=\"scope.row.list_pic_url\" alt=\"\" style=\"width: 40px;height: 40px\">\n                                    </template>\n                                </el-table-column>\n                                <el-table-column prop=\"name\" label=\"商品名称\" width=\"300px\"></el-table-column>\n                                <el-table-column label=\"操作\">\n                                    <template scope=\"scope\">\n                                        <el-button\n                                                size=\"small\"\n                                                type=\"danger\"\n                                                @click=\"relateSelect(scope.row.id)\">选择\n                                        </el-button>\n                                    </template>\n                                </el-table-column>\n                            </el-table>\n                            <el-button slot=\"reference\" type=\"primary\" @click=\"relateGoodsClick\">添加关联商品</el-button>\n                        </el-popover>\n                    </el-form-item>\n                    <el-form-item label=\"结束时间\" prop=\"end_time\">\n                        <el-date-picker\n                                v-model=\"infoForm.end_time\"\n                                type=\"datetime\"\n                                placeholder=\"选择日期\"\n                                default-time=\"23:59:59\">\n                            >\n                        </el-date-picker>\n                    </el-form-item>\n                    <el-form-item label=\"排序\" prop=\"sort_order\">\n                        <el-input-number v-model=\"infoForm.sort_order\" :min=\"1\" :max=\"999\"></el-input-number>\n                    </el-form-item>\n                    <el-form-item label=\"广告启用\">\n                        <el-switch active-value=\"1\" inactive-value=\"0\" v-model=\"infoForm.enabled\"></el-switch>\n                    </el-form-item>\n                    <el-form-item>\n                        <el-button type=\"primary\" @click=\"onSubmitInfo\">确定保存</el-button>\n                        <el-button @click=\"goBackPage\">取消</el-button>\n                    </el-form-item>\n                </el-form>\n            </div>\n        </div>\n    </div>\n</template>\n\n<script>\n    import api from '@/config/api';\n\timport lrz from 'lrz'\r\n\timport moment from 'moment'\n    export default {\n        data() {\n            return {\n                qiniuZone:'',\n                root: '',\n                fileList: [],\n                infoForm: {\n                    id: 0,\n                    image_url: '',\n                    link_type: 0,\n                    enabled: 0,\n                    end_time: '',\n                    goods_id:0,\n                    link:''\n                },\n                infoRules: {\n                    image_url: [\n                        {required: true, message: '请输入广告图片', trigger: 'blur'},\n                    ],\n                    end_time: [\n                        {required: true, message: '请选择时间', trigger: 'blur'},\n                    ],\n                },\n                picData: {\n                    token: ''\n                },\n                url: '',\n                chooseRelateGoods: [],\n                related_pop: false,\n\t\t\t\tpreviewList: [],\n            }\n        },\n        methods: {\n\t\t\thandleSuccess(){},\n\t\t\tpreviewIndexImg() {\n\t\t\t\tlet that = this;\n\t\t\t\tthat.previewList = [];\n\t\t\t\tthat.previewList.push(that.infoForm.image_url);\n\t\t\t},\n\t\t\tdelePicList() {\n\t\t\t\tlet that = this;\n\t\t\t\tthat.$confirm('确定删除该图片?', '提示', {\n\t\t\t\t\t\tconfirmButtonText: '确定',\n\t\t\t\t\t\tcancelButtonText: '取消',\n\t\t\t\t\t\ttype: 'warning'\n\t\t\t\t\t})\n\t\t\t\t\t.then(() => {\n\t\t\t\t\t\tthat.infoForm.image_url = '';\n\t\t\t\t\t})\n\t\t\t\t\t.catch(() => {})\n\t\t\t},\n\t\t\tuploadIndexImg(request) {\n\t\t\t\tconst file = request.file;\n\t\t\t\tlrz(file).then((rst) => {\n\t\t\t\t\tconst config = {\n\t\t\t\t\t\theaders: {\n\t\t\t\t\t\t\t'Content-Type': 'multipart/form-data'\n\t\t\t\t\t\t},\n\t\t\t\t\t};\n\t\t\t\t\tconst fileName = moment().format('YYYYMMDDHHmmssSSS') + Math.floor(Math.random() * 100) + file.name; //自定义图片名\n\t\t\t\t\tconst formData = new FormData();\n\t\t\t\t\tformData.append('file', rst.file);\n\t\t\t\t\tformData.append('token', this.picData.token);\n\t\t\t\t\tformData.append('key', fileName);\n\t\t\t\t\tthis.$http.post(this.qiniuZone, formData, config).then((res) => {\n\t\t\t\t\t\tthis.handleUploadImageSuccess(res.data)\n\t\t\t\t\t})\n\t\t\t\t}).catch(function(err){\n\t\t\t\t\tconsole.log(err)\n\t\t\t\t})\n\t\t\t},\n\t\t\thandleUploadImageSuccess(res, file) {\n\t\t\t    let url = this.url;\n\t\t\t    this.infoForm.image_url = url + res.key;\n\t\t\t},\n            relateSelect(id) {\n                console.log(id);\n                this.infoForm.goods_id = id;\n                this.related_pop = false;\n            },\n            relateGoodsClick() {\n                this.axios.post('ad/getallrelate', {id: this.infoForm.id}).then((response) => {\n                    if (response.data.errno === 0) {\n                        this.chooseRelateGoods = response.data.data\n                    }\n                });\n            },\n            test() {\n                console.log(this.infoForm.end_time);\n            },\n            beforeAdRemove() {\n                return this.$confirm(`确定移除？`);\n            },\n            adRemove(file, fileList) {\n                this.infoForm.image_url = '';\n            },\n            getQiniuToken() {\n                let that = this\n                this.axios.post('index/getQiniuToken').then((response) => {\n                    let resInfo = response.data.data;\n                    console.log(resInfo);\n                    that.picData.token = resInfo.token;\n                    that.url = resInfo.url;\n                })\n            },\n            goBackPage() {\n                this.$router.go(-1);\n            },\n            onSubmitInfo() {\n                console.log(this.infoForm);\n                // return false;\n                let time = this.infoForm.end_time\n                if (time == 0) {\n                    this.$message({\n                        type: 'error',\n                        message: '请选择时间'\n                    });\n                    return false;\n                }\n                if (this.infoForm.link_type == 0) {\n                    if(this.infoForm.goods_id == 0 ){\n                        this.$message({\n                            type: 'error',\n                            message: '请选择商品'\n                        });\n                        return false;\n                    }\n                }\n                if (this.infoForm.link_type == 1) {\n                    if(this.infoForm.link == '' ){\n                        this.$message({\n                            type: 'error',\n                            message: '请输入链接'\n                        });\n                        return false;\n                    }\n                }\n                this.$refs['infoForm'].validate((valid) => {\n                    if (valid) {\n                        this.axios.post('ad/store', this.infoForm).then((response) => {\n                            if (response.data.errno === 0) {\n                                this.$message({\n                                    type: 'success',\n                                    message: '保存成功'\n                                });\n                                this.$router.go(-1);\n                            } else if (response.data.errno === 100) {\n                                this.$message({\n                                    type: 'error',\n                                    message: '该商品已经有广告关联'\n                                })\n                            }\n                            else {\n                                this.$message({\n                                    type: 'error',\n                                    message: '保存失败'\n                                })\n                            }\n                        })\n                    } else {\n                        return false;\n                    }\n                });\n            },\n            getInfo() {\n                if (this.infoForm.id <= 0) {\n                    return false\n                }\n                //加载广告详情\n                let that = this\n                this.axios.get('ad/info', {\n                    params: {\n                        id: that.infoForm.id\n                    }\n                }).then((response) => {\n                    let resInfo = response.data.data;\n                    resInfo.enabled = resInfo.enabled ? \"1\" : \"0\";\n                    that.infoForm = resInfo;\n                    that.infoForm.end_time = resInfo.end_time * 1000;\n                    let info = {\n                        name: resInfo.name,\n                        url: resInfo.image_url\n                    };\n                    this.fileList.push(info);\n                    console.log(this.infoForm);\n                })\n            }\n        },\n        components: {},\n        mounted() {\n            this.infoForm.id = this.$route.query.id || 0;\n            this.getInfo();\n            this.root = api.rootUrl;\n            this.getQiniuToken();\n            this.qiniuZone = api.qiniu;\n        }\n    }\n\n</script>\n\n<style scoped>\n    .image-show {\n\t\twidth: 375px;\n\t\theight: 220px;\n\t\tbackground-color: #f9f9f9;\n\t\tdisplay: block;\n\t}\n\n    .id-input {\n        margin-bottom: 20px;\n    }\n\n    .link-input .el-input__inner {\n        width: 400px !important;\n    }\n\t\n\t.o-shadow {\n\t\tposition: absolute;\n\t\tbottom: 10px;\n\t\tright: 10px;\n\t\tbackground-color: rgba(0, 0, 0, .5);\n\t\topacity: 0;\n\t\ttransition: opacity .3s;\n\t\tcolor: #fff;\n\t\tfont-size: 20px;\n\t\tline-height: 20px;\n\t\tpadding: 10px;\n\t\tcursor: pointer;\n\t}\n\t\n\t.index-image {\n\t\twidth: 375px;\n\t\theight: 220px;\n\t\tposition: relative;\n\t}\n\t\n\t.index-image:hover .o-shadow {\n\t\topacity: 1;\n\t}\n</style>","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./AdAddPage.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./AdAddPage.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./AdAddPage.vue?vue&type=template&id=eda6548e&scoped=true&\"\nimport script from \"./AdAddPage.vue?vue&type=script&lang=js&\"\nexport * from \"./AdAddPage.vue?vue&type=script&lang=js&\"\nimport style0 from \"./AdAddPage.vue?vue&type=style&index=0&id=eda6548e&prod&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"eda6548e\",\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_c","_self","staticClass","attrs","name","_v","_s","infoForm","id","on","goBackPage","ref","infoRules","image_url","previewList","previewIndexImg","_e","delePicList","qiniuZone","handleSuccess","getQiniuToken","picData","uploadIndexImg","slot","model","value","link_type","callback","$$v","$set","expression","link","goods_id","related_pop","staticStyle","chooseRelateGoods","scopedSlots","_u","key","fn","scope","row","list_pic_url","$event","relateSelect","relateGoodsClick","end_time","sort_order","enabled","onSubmitInfo","staticRenderFns","data","root","fileList","required","message","trigger","token","url","methods","that","push","$confirm","confirmButtonText","cancelButtonText","type","then","catch","request","file","lrz","rst","config","headers","fileName","moment","format","Math","floor","random","formData","FormData","append","$http","post","res","handleUploadImageSuccess","err","console","log","axios","response","errno","test","beforeAdRemove","adRemove","resInfo","$router","go","time","$message","$refs","validate","valid","getInfo","get","params","info","components","mounted","$route","query","api","rootUrl","qiniu","component"],"sourceRoot":""}