"use strict";(self["webpackChunkadmin"]=self["webpackChunkadmin"]||[]).push([[855],{16855:function(t,e,a){a.r(e),a.d(e,{default:function(){return c}});var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"content-page"},[e("div",{staticClass:"content-nav"},[e("el-breadcrumb",{staticClass:"breadcrumb",attrs:{separator:"/"}},[e("el-breadcrumb-item",[t._v("商品设置")])],1)],1),e("div",{staticClass:"content-main"},[e("el-tabs",{on:{"tab-click":t.handleClick},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[e("el-tab-pane",{attrs:{label:"商品分类",name:"first"}}),e("el-tab-pane",{attrs:{label:"商品型号",name:"second"}})],1),e("div",{staticClass:"form-table-box"},[e("div",{staticClass:"btn-wrap"},[0==t.pIndex?e("router-link",{attrs:{to:"/dashboard/category/add"}},[e("el-button",{attrs:{plain:"",type:"primary",icon:"plus"}},[t._v("添加分类")])],1):t._e(),1==t.pIndex?e("router-link",{attrs:{to:"/dashboard/specification/detail"}},[e("el-button",{attrs:{plain:"",type:"primary",icon:"plus"}},[t._v("添加型号")])],1):t._e()],1),0==t.pIndex?e("el-table",{staticStyle:{width:"100%"},attrs:{data:t.categoryData,border:"",stripe:""}},[e("el-table-column",{attrs:{prop:"name",label:"分类名称"},scopedSlots:t._u([{key:"default",fn:function(a){return[1==a.row.level?e("div",{staticClass:"bg-gray"},[t._v(t._s(a.row.name))]):t._e(),2==a.row.level?e("div",{staticClass:"bg-left"},[t._v(t._s(a.row.name))]):t._e()]}}],null,!1,2702721217)}),e("el-table-column",{attrs:{label:"图标显示",width:"80"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("el-switch",{attrs:{"active-text":"","inactive-text":""},on:{change:function(e){return t.changeChannelStatus(e,a.row.id)}},model:{value:a.row.is_channel,callback:function(e){t.$set(a.row,"is_channel",e)},expression:"scope.row.is_channel"}})]}}],null,!1,156706435)}),e("el-table-column",{attrs:{label:"首页显示",width:"80"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("el-switch",{attrs:{"active-text":"","inactive-text":""},on:{change:function(e){return t.changeShowStatus(e,a.row.id)}},model:{value:a.row.is_show,callback:function(e){t.$set(a.row,"is_show",e)},expression:"scope.row.is_show"}})]}}],null,!1,1512122531)}),e("el-table-column",{attrs:{label:"全部产品页面显示",width:"140"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("el-switch",{attrs:{"active-text":"","inactive-text":""},on:{change:function(e){return t.changeCategoryStatus(e,a.row.id)}},model:{value:a.row.is_category,callback:function(e){t.$set(a.row,"is_category",e)},expression:"scope.row.is_category"}})]}}],null,!1,585495427)}),e("el-table-column",{attrs:{prop:"sort_order",label:"排序",width:"100",sortable:""},scopedSlots:t._u([{key:"default",fn:function(a){return[e("el-input",{attrs:{placeholder:"排序"},on:{blur:function(e){return t.submitSort(a.$index,a.row)}},model:{value:a.row.sort_order,callback:function(e){t.$set(a.row,"sort_order",e)},expression:"scope.row.sort_order"}})]}}],null,!1,2273605888)}),e("el-table-column",{attrs:{label:"操作",width:"300"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("el-button",{attrs:{size:"small"},on:{click:function(e){return t.handleRowEdit(a.$index,a.row)}}},[t._v("编辑")]),e("el-button",{attrs:{size:"small",type:"danger"},on:{click:function(e){return t.handleRowDelete(a.$index,a.row)}}},[t._v("删除 ")])]}}],null,!1,3255474887)})],1):t._e(),1==t.pIndex?e("el-table",{staticStyle:{width:"100%"},attrs:{data:t.specData,border:"",stripe:""}},[e("el-table-column",{attrs:{prop:"id",label:"ID",width:"100"}}),e("el-table-column",{attrs:{prop:"name",label:"型号名"}}),e("el-table-column",{attrs:{prop:"sort_order",label:"排序",width:"200"}}),e("el-table-column",{attrs:{label:"操作",width:"160"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("el-button",{attrs:{size:"small"},on:{click:function(e){return t.specEdit(a.$index,a.row)}}},[t._v("编辑")]),e("el-button",{attrs:{size:"small",type:"danger"},on:{click:function(e){return t.specDelete(a.$index,a.row)}}},[t._v("删除 ")])]}}],null,!1,3568390407)})],1):t._e()],1)],1)])},n=[],o=(a(57658),{data(){return{activeName:"first",pIndex:0,categoryData:[],is_spec_add:!1,dialogFormVisible:!1,specData:[],form:{},formLabelWidth:"120px"}},methods:{handleClick(t,e){let a=t._data.index;this.activeClass=0,0==a?(this.getList(),this.pIndex=0):1==a&&(this.getSpecList(),this.pIndex=1)},changeShowStatus(t,e){this.axios.get("category/showStatus",{params:{status:t,id:e}}).then((t=>{}))},changeChannelStatus(t,e){this.axios.get("category/channelStatus",{params:{status:t,id:e}}).then((t=>{}))},changeCategoryStatus(t,e){this.axios.get("category/categoryStatus",{params:{status:t,id:e}}).then((t=>{}))},submitSort(t,e){this.axios.post("category/updateSort",{id:e.id,sort:e.sort_order}).then((t=>{}))},handleRowEdit(t,e){this.$router.push({name:"category_add",query:{id:e.id}})},specEdit(t,e){console.log(e.id),this.$router.push({name:"specification_detail",query:{id:e.id}})},specDelete(t,e){this.$confirm("确定要删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{this.axios.post("specification/delete",{id:e.id}).then((t=>{console.log(t.data),0===t.data.errno?(this.$message({type:"success",message:"删除成功!"}),this.getSpecList()):this.$message({type:"error",message:"删除失败，该型号下有商品!"})}))}))},handleRowDelete(t,e){this.$confirm("确定要删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{this.axios.post("category/destory",{id:e.id}).then((t=>{console.log(t.data),0===t.data.errno?(this.$message({type:"success",message:"删除成功!"}),this.getList()):this.$message({type:"error",message:"删除失败，该分类有子分类!"})}))}))},getList(){this.axios.get("category",{params:{page:this.page}}).then((t=>{this.categoryData=t.data.data}))},getSpecList(){this.axios.get("specification").then((t=>{this.specData=t.data.data}))}},components:{},mounted(){this.getList()}}),i=o,r=a(1001),l=(0,r.Z)(i,s,n,!1,null,"636f1798",null),c=l.exports}}]);
//# sourceMappingURL=855.36b2bd45.js.map