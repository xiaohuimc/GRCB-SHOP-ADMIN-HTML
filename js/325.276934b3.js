"use strict";(self["webpackChunkadmin"]=self["webpackChunkadmin"]||[]).push([[325],{50325:function(t,e,a){a.r(e),a.d(e,{default:function(){return u}});var n=function(){var t=this,e=t._self._c;return e("div",{staticClass:"content-page"},[e("div",{staticClass:"content-nav"},[e("el-breadcrumb",{staticClass:"breadcrumb",attrs:{separator:"/"}},[e("el-breadcrumb-item",[t._v("用户列表")])],1)],1),e("div",{staticClass:"content-main"},[e("div",{staticClass:"filter-box"},[e("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:t.filterForm}},[e("el-form-item",{attrs:{label:"用户昵称"}},[e("el-input",{attrs:{placeholder:"用户昵称"},model:{value:t.filterForm.nickname,callback:function(e){t.$set(t.filterForm,"nickname",e)},expression:"filterForm.nickname"}})],1),e("el-form-item",[e("el-button",{attrs:{type:"primary"},on:{click:t.onSubmitFilter}},[t._v("查询")])],1)],1)],1),e("div",{staticClass:"form-table-box"},[e("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData,border:"",stripe:""}},[e("el-table-column",{attrs:{prop:"id",label:"ID",width:"60"}}),e("el-table-column",{attrs:{label:"头像",width:"80"},scopedSlots:t._u([{key:"default",fn:function(t){return[e("img",{staticStyle:{width:"50px",height:"50px"},attrs:{src:t.row.avatar,alt:""}})]}}])}),e("el-table-column",{attrs:{prop:"nickname",label:"昵称"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("el-input",{attrs:{placeholder:"昵称"},on:{blur:function(e){return t.submitNick(a.$index,a.row)}},model:{value:a.row.nickname,callback:function(e){t.$set(a.row,"nickname",e)},expression:"scope.row.nickname"}})]}}])}),e("el-table-column",{attrs:{prop:"gender",label:"性别",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(2==e.row.gender?"女":"男")+" ")]}}])}),e("el-table-column",{attrs:{prop:"register_time",label:"注册时间",width:"180"}}),e("el-table-column",{attrs:{prop:"last_login_time",label:"最近登录",width:"180"}}),e("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("el-button",{attrs:{size:"small"},on:{click:function(e){return t.handleRowEdit(a.$index,a.row)}}},[t._v("编辑")])]}}])})],1)],1),e("div",{staticClass:"page-box"},[e("el-pagination",{attrs:{background:"","current-page":t.page,"page-size":10,layout:"total, prev, pager, next, jumper",total:t.total},on:{"current-change":t.handlePageChange,"update:currentPage":function(e){t.page=e},"update:current-page":function(e){t.page=e}}})],1)])])},l=[],i=(a(57658),{data(){return{page:1,total:0,filterForm:{name:""},tableData:[],loginInfo:null,username:""}},methods:{submitNick(t,e){this.axios.post("user/updateInfo",{id:e.id,nickname:e.nickname}).then((t=>{}))},handlePageChange(t){this.page=t,localStorage.setItem("userPage",this.page),this.getList()},handleRowEdit(t,e){this.$router.push({name:"user_add",query:{id:e.id}})},handleRowDelete(t,e){this.$confirm("确定要删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{this.axios.post("user/destory",{id:e.id}).then((t=>{console.log(t.data),0===t.data.errno&&(this.$message({type:"success",message:"删除成功!"}),this.getList())}))}))},onSubmitFilter(){this.page=1,this.getList()},getList(){this.axios.get("user",{params:{page:this.page,nickname:this.filterForm.nickname}}).then((t=>{console.log(t.data),console.log(t),this.tableData=t.data.data.userData.data,this.page=t.data.data.userData.currentPage,this.total=t.data.data.userData.count})),this.loginInfo||(this.loginInfo=JSON.parse(window.localStorage.getItem("userInfo")||null),this.username=this.loginInfo.username)}},components:{},mounted(){let t=localStorage.getItem("userPage");null==t&&(t=1),this.page=Number(t),console.log(this.page),this.getList()}}),s=i,r=a(1001),o=(0,r.Z)(s,n,l,!1,null,"94f7bf46",null),u=o.exports}}]);
//# sourceMappingURL=325.276934b3.js.map