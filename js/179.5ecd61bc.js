"use strict";(self["webpackChunkadmin"]=self["webpackChunkadmin"]||[]).push([[179],{21179:function(t,a,s){s.r(a),s.d(a,{default:function(){return n}});var e=function(){var t=this,a=t._self._c;return a("div",{staticClass:"content-page"},[a("div",{staticClass:"content-nav"},[a("el-breadcrumb",{staticClass:"breadcrumb",attrs:{separator:"/"}},[a("el-breadcrumb-item",{attrs:{to:{name:"user"}}},[t._v("会员管理")]),a("el-breadcrumb-item",[t._v("会员详情")])],1),a("div",{staticClass:"operation-nav"},[a("el-button",{attrs:{type:"primary",icon:"arrow-left"},on:{click:t.goBackPage}},[t._v("返回列表")])],1)],1),a("div",{staticClass:"content-main"},[a("div",{staticClass:"form-table-box"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.userData,border:"",stripe:""}},[a("el-table-column",{attrs:{prop:"id",label:"ID",width:"60"}}),a("el-table-column",{attrs:{label:"头像",width:"80"},scopedSlots:t._u([{key:"default",fn:function(t){return[a("img",{staticStyle:{width:"50px",height:"50px"},attrs:{src:t.row.avatar,alt:""}})]}}])}),a("el-table-column",{attrs:{prop:"nickname",width:"80",label:"昵称"}}),a("el-table-column",{attrs:{prop:"name",width:"110",label:"姓名"},scopedSlots:t._u([{key:"default",fn:function(s){return[a("el-input",{attrs:{size:"mini",placeholder:"姓名"},on:{blur:function(a){return t.submitName(s.$index,s.row)}},model:{value:s.row.name,callback:function(a){t.$set(s.row,"name",a)},expression:"scope.row.name"}})]}}])}),a("el-table-column",{attrs:{prop:"name",width:"160",label:"手机"},scopedSlots:t._u([{key:"default",fn:function(s){return[a("el-input",{attrs:{size:"mini",placeholder:"手机"},on:{blur:function(a){return t.submitMobile(s.$index,s.row)}},model:{value:s.row.mobile,callback:function(a){t.$set(s.row,"mobile",a)},expression:"scope.row.mobile"}})]}}])}),a("el-table-column",{attrs:{prop:"gender",label:"性别",width:"60"},scopedSlots:t._u([{key:"default",fn:function(a){return[t._v(" "+t._s(2==a.row.gender?"女":"男")+" ")]}}])}),a("el-table-column",{attrs:{prop:"register_time",label:"注册时间",width:"180"}}),a("el-table-column",{attrs:{prop:"last_login_time",label:"最近登录",width:"180"}})],1)],1),a("div",{staticClass:"block-box"},[a("div",{staticClass:"block"},[a("div",{staticClass:"text"},[t._v("提交订单数:")]),a("div",{staticClass:"num"},[t._v(t._s(this.dataInfo.orderSum)+"笔")])]),a("div",{staticClass:"block"},[a("div",{staticClass:"text"},[t._v("成交订单:")]),a("div",{staticClass:"num"},[t._v(t._s(this.dataInfo.orderDone)+"笔")])]),a("div",{staticClass:"block"},[a("div",{staticClass:"text"},[t._v("消费金额:")]),null==this.dataInfo.orderMoney?a("div",{staticClass:"num"},[t._v("0元")]):a("div",{staticClass:"num"},[t._v(t._s(this.dataInfo.orderMoney)+"元")])]),a("div",{staticClass:"block"},[a("div",{staticClass:"text"},[t._v("加入购物车:")]),null==this.dataInfo.cartSum?a("div",{staticClass:"num"},[t._v("0件")]):a("div",{staticClass:"num"},[t._v(t._s(this.dataInfo.cartSum)+"件")])])]),a("el-tabs",{on:{"tab-click":t.handleClick},model:{value:t.activeName,callback:function(a){t.activeName=a},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"订单",name:"first"}}),a("el-tab-pane",{attrs:{label:"地址管理",name:"second"}}),a("el-tab-pane",{attrs:{label:"购物车",name:"third"}}),a("el-tab-pane",{attrs:{label:"足迹",name:"fourth"}})],1),0==this.pIndex?a("div",{staticClass:"form-table-box"},t._l(t.orderData,(function(s){return a("div",{staticClass:"list-wrap clearfix"},[a("div",{staticClass:"header clearfix"},[a("div",{staticClass:"status-text"},[t._v(t._s(s.order_status_text))]),a("div",{staticClass:"add-time"},[t._v(t._s(s.add_time))]),a("div",{staticClass:"order-id"},[t._v("订单号："+t._s(s.order_sn))]),a("div",{staticClass:"price-wrap"},[t._v("当前合计"+t._s(s.actual_price)+"元（含运费"+t._s(s.freight_price)+"元）")]),s.change_price!=s.actual_price?a("div",{staticClass:"price-change"},[t._v(" 改价前"+t._s(s.change_price)+"元 ")]):t._e(),a("div",{staticClass:"goods-num"},[t._v("共"+t._s(s.goodsCount)+"件商品")])]),a("div",{staticClass:"content-wrap clearfix"},[a("div",{staticClass:"left"},t._l(s.goodsList,(function(s){return a("div",{staticClass:"goods-list"},[a("img",{staticClass:"goods-img",attrs:{src:s.list_pic_url}}),a("div",{staticClass:"goods-name"},[t._v(t._s(s.goods_name))]),a("div",{staticClass:"goods-spec"},[t._v(t._s(s.goods_specifition_name_value))]),a("div",{staticClass:"goods-number"},[t._v("数量："+t._s(s.number))]),a("div",{staticClass:"goods-number"},[t._v("¥"+t._s(s.retail_price))])])})),0),a("div",{staticClass:"main"},[a("div",{staticClass:"m1"},[a("div",{staticClass:"user-name"},[t._v(t._s(s.consignee))]),a("div",{staticClass:"user-mobile"},[t._v(t._s(s.mobile))])]),a("div",{staticClass:"user-address"},[t._v(t._s(s.full_region)+t._s(s.address))]),a("div",{staticClass:"user-post"},[t._v(t._s(s.postscript))])]),a("div",{staticClass:"right"},[a("el-button",{staticClass:"right-detail",attrs:{type:"text",size:"mini"},on:{click:function(a){return t.viewDetail(s.order_sn)}}},[t._v(" 查看详情 ")])],1)])])})),0):t._e(),1==this.pIndex?a("div",{staticClass:"address-wrap"},[a("div",{staticClass:"coupon-w"},[t._m(0),t._l(t.addressData,(function(s){return a("div",{staticClass:"bottom"},[a("div",{staticClass:"l"},[a("div",{staticClass:"f1",staticStyle:{width:"100px"}},[t._v(t._s(s.name))]),a("div",{staticClass:"f1",staticStyle:{width:"100px"}},[t._v(t._s(s.mobile))]),a("div",{staticClass:"f1",staticStyle:{width:"600px"}},[t._v(t._s(s.full_region))])]),a("div",{staticClass:"r"},[a("el-button",{attrs:{size:"small"},on:{click:function(a){return t.addressEdit(s)}}},[t._v("编辑")])],1)])}))],2)]):t._e(),2==this.pIndex?a("div",{staticClass:"form-table-box"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.cartData,border:"",stripe:""}},[a("el-table-column",{attrs:{prop:"goods_id",label:"商品ID",width:"100px"}}),a("el-table-column",{attrs:{prop:"list_pic_url",label:"图片",width:"70px"},scopedSlots:t._u([{key:"default",fn:function(t){return[a("img",{staticStyle:{width:"50px",height:"50px"},attrs:{src:t.row.list_pic_url,alt:""}})]}}],null,!1,945916574)}),a("el-table-column",{attrs:{prop:"goods_name",label:"商品名称"}}),a("el-table-column",{attrs:{prop:"goods_specifition_name_value",label:"型号"}}),a("el-table-column",{attrs:{prop:"number",label:"数量",width:"70px"}}),a("el-table-column",{attrs:{prop:"retail_price",label:"成交价"}}),a("el-table-column",{attrs:{prop:"add_time",label:"加入时间"}}),a("el-table-column",{attrs:{prop:"is_delete",label:"是否删除"},scopedSlots:t._u([{key:"default",fn:function(s){return[a("label",[t._v(t._s(1==s.row.is_delete?"已删":""))])]}}],null,!1,434019990)})],1)],1):t._e(),3==this.pIndex?a("div",{staticClass:"form-table-box"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.footData,stripe:""}},[a("el-table-column",{attrs:{prop:"id",label:"商品ID",width:"100px"}}),a("el-table-column",{attrs:{prop:"list_pic_url",label:"图片",width:"70px"},scopedSlots:t._u([{key:"default",fn:function(t){return[a("img",{staticStyle:{width:"50px",height:"50px"},attrs:{src:t.row.list_pic_url,alt:""}})]}}],null,!1,945916574)}),a("el-table-column",{attrs:{prop:"name",label:"商品名称"}})],1)],1):t._e(),a("div",{staticClass:"page-box"},[a("el-pagination",{attrs:{"current-page":t.page,"page-size":10,layout:"total, prev, pager, next, jumper",total:t.total},on:{"current-change":t.handlePageChange}})],1)],1),a("el-dialog",{attrs:{title:"修改地址",visible:t.dialogAddressVisible},on:{"update:visible":function(a){t.dialogAddressVisible=a}}},[a("el-form",{attrs:{model:t.nowAddressData}},[a("el-form-item",{attrs:{label:"所在地区:","label-width":"120px"}},[a("el-cascader",{attrs:{options:t.options,placeholder:"请选择"},model:{value:t.addOptions,callback:function(a){t.addOptions=a},expression:"addOptions"}})],1),a("el-form-item",{attrs:{label:"详细地址:","label-width":"120px"}},[a("el-input",{staticClass:"el-input",attrs:{"auto-complete":"off",placeholder:"请输入详细地"},model:{value:t.nowAddressData.address,callback:function(a){t.$set(t.nowAddressData,"address",a)},expression:"nowAddressData.address"}})],1),a("el-form-item",{attrs:{label:"收货人:","label-width":"120px"}},[a("el-input",{staticClass:"el-input",attrs:{"auto-complete":"off",placeholder:"请输入收货人"},model:{value:t.nowAddressData.name,callback:function(a){t.$set(t.nowAddressData,"name",a)},expression:"nowAddressData.name"}})],1),a("el-form-item",{attrs:{label:"手机:","label-width":"120px"}},[a("el-input",{staticClass:"el-input",attrs:{"auto-complete":"off",placeholder:"请输入收货人手机"},model:{value:t.nowAddressData.mobile,callback:function(a){t.$set(t.nowAddressData,"mobile",a)},expression:"nowAddressData.mobile"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(a){t.dialogAddressVisible=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.saveAddress}},[t._v("确 定")])],1)],1)],1)},i=[function(){var t=this,a=t._self._c;return a("div",{staticClass:"top"},[a("div",{staticClass:"l"},[a("div",{staticClass:"f1",staticStyle:{width:"100px"}},[t._v("收件人")]),a("div",{staticClass:"f1",staticStyle:{width:"100px"}},[t._v("手机")]),a("div",{staticClass:"f1",staticStyle:{width:"600px"}},[t._v("详细地址")])]),a("div",{staticClass:"r"},[t._v("操作")])])}],l=(s(57658),s(70636),{data(){return{loginInfo:null,page:1,total:0,filterForm:{name:""},tableData:[],activeName:"first",pIndex:0,num:0,infoForm:{id:0},userData:[],addressData:[],cartData:[],footData:[],orderData:[],dialogAddressVisible:!1,nowAddressData:{},addOptions:[],options:[],addValue:{},dataInfo:{},data_money:[],data_sum:[],forlist:[11,10,9,8,7,6,5,4,3,2,1,0]}},methods:{saveAddress(){this.nowAddressData.addOptions=this.addOptions,this.axios.post("user/saveaddress",this.nowAddressData).then((t=>{0===t.data.errno?(this.$message({type:"success",message:"修改成功!"}),this.addressData=[],this.getAddress(),this.dialogAddressVisible=!1):this.$message({type:"error",message:"修改失败"})}))},addressEdit(t){this.nowAddressData=t,this.addOptions.push(t.province_id,t.city_id,t.district_id),this.dialogAddressVisible=!0},viewDetail(t){this.$router.push({name:"order_detail",query:{order_sn:t}})},handleClick(t,a){let s=t._data.index;this.page=1,this.total=0,0==s?(this.pIndex=0,this.getOrder()):1==s?(this.pIndex=1,this.getAddress()):2==s?(this.pIndex=2,this.getCartData()):3==s&&(this.pIndex=3,this.getFootData())},submitNick(t,a){this.axios.post("user/updateInfo",{id:a.id,nickname:a.nickname}).then((t=>{}))},submitName(t,a){this.axios.post("user/updateName",{id:a.id,name:a.name}).then((t=>{0===t.data.errno?this.$message({type:"success",message:"修改成功!"}):this.$message({type:"error",message:"修改失败"})}))},submitMobile(t,a){this.axios.post("user/updateMobile",{id:a.id,mobile:a.mobile}).then((t=>{0===t.data.errno?this.$message({type:"success",message:"修改成功!"}):this.$message({type:"error",message:"修改失败"})}))},handlePageChange(t){this.page=t,localStorage.setItem("thisPage",this.page);let a=this.pIndex;0==a?this.getOrder():1==a?this.getAddress():2==a?this.getCartData():3==a&&this.getFootData()},goBackPage(){this.$router.go(-1)},datainfo(){if(this.infoForm.id<=0)return!1;let t=this;this.axios.get("user/datainfo",{params:{id:t.infoForm.id}}).then((t=>{let a=t.data.data;this.dataInfo=a}))},getInfo(){if(this.infoForm.id<=0)return!1;let t=this;this.axios.get("user/info",{params:{id:t.infoForm.id}}).then((t=>{let a=t.data.data;this.userData.push(a)}))},getOrder(){if(this.infoForm.id<=0)return!1;let t=this;this.axios.get("user/order",{params:{id:t.infoForm.id,page:this.page}}).then((t=>{this.orderData=t.data.data.data,this.page=t.data.data.currentPage,this.total=t.data.data.count}))},getAddress(){if(this.infoForm.id<=0)return!1;let t=this;this.axios.get("user/address",{params:{id:t.infoForm.id,page:this.page}}).then((t=>{this.addressData=t.data.data.data,this.page=t.data.data.currentPage,this.total=t.data.data.count}))},getCartData(){if(this.infoForm.id<=0)return!1;let t=this;this.axios.get("user/cartdata",{params:{id:t.infoForm.id,page:this.page}}).then((t=>{this.cartData=t.data.data.data,this.page=t.data.data.currentPage,this.total=t.data.data.count}))},getFootData(){if(this.infoForm.id<=0)return!1;let t=this;this.axios.get("user/foot",{params:{id:t.infoForm.id,page:this.page}}).then((t=>{this.footData=t.data.data.data,this.page=t.data.data.currentPage,this.total=t.data.data.count}))},getAllRegion(){this.axios.get("order/getAllRegion").then((t=>{this.options=t.data.data}))}},components:{},mounted(){this.infoForm.id=this.$route.query.id||0,this.getInfo(),this.getOrder(),this.datainfo(),this.getAllRegion(),this.loginInfo||(this.loginInfo=JSON.parse(window.localStorage.getItem("userInfo")||null))}}),o=l,r=s(1001),d=(0,r.Z)(o,e,i,!1,null,null,null),n=d.exports}}]);
//# sourceMappingURL=179.5ecd61bc.js.map