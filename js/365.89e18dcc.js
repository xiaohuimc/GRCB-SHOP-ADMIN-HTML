"use strict";(self["webpackChunkadmin"]=self["webpackChunkadmin"]||[]).push([[365],{98365:function(e,t,o){o.r(t),o.d(t,{default:function(){return l}});var r=function(){var e=this,t=e._self._c;return t("div",{staticClass:"content-page"},[t("div",{staticClass:"content-nav"},[t("el-breadcrumb",{staticClass:"breadcrumb",attrs:{separator:"/"}},[t("el-breadcrumb-item",{attrs:{to:{name:"nature"}}},[e._v("商品设置")]),t("el-breadcrumb-item",[e._v(e._s(e.infoForm.id?"编辑型号":"添加型号"))])],1),t("div",{staticClass:"operation-nav"},[t("el-button",{attrs:{type:"primary",icon:"arrow-left"},on:{click:e.goBackPage}},[e._v("返回列表")])],1)],1),t("div",{staticClass:"content-main"},[t("div",{staticClass:"form-table-box"},[t("el-form",{ref:"infoForm",attrs:{rules:e.infoRules,model:e.infoForm,"label-width":"120px"}},[t("el-form-item",{attrs:{label:"分类名称",prop:"name"}},[t("el-input",{model:{value:e.infoForm.name,callback:function(t){e.$set(e.infoForm,"name",t)},expression:"infoForm.name"}})],1),t("el-form-item",{attrs:{label:"排序"}},[t("el-input-number",{attrs:{min:1,max:1e3},model:{value:e.infoForm.sort_order,callback:function(t){e.$set(e.infoForm,"sort_order",t)},expression:"infoForm.sort_order"}})],1),t("el-form-item",[e.infoForm.id>0?t("el-button",{attrs:{type:"primary"},on:{click:e.updateSpec}},[e._v("确定保存")]):t("el-button",{attrs:{type:"primary"},on:{click:e.addSpec}},[e._v("确定添加")]),e.infoForm.id>0?t("el-button",{attrs:{type:"danger"},on:{click:e.specDelete}},[e._v("删除")]):e._e(),t("el-button",{on:{click:e.goBackPage}},[e._v("取消")])],1)],1)],1)])])},i=[],s=(o(70636),{data(){return{infoForm:{id:0,name:"",sort_order:1},infoRules:{name:[{required:!0,message:"请输入名称",trigger:"blur"}]}}},methods:{addSpec(){let e={name:this.infoForm.name,sort_order:this.infoForm.sort_order};this.$refs["infoForm"].validate((t=>{if(!t)return!1;this.axios.post("specification/add",e).then((e=>{0===e.data.errno?(this.$message({type:"success",message:"添加成功!"}),this.$router.go(-1)):this.$message({type:"error",message:"添加失败"})}))}))},updateSpec(){let e={id:this.infoForm.id,name:this.infoForm.name,sort_order:this.infoForm.sort_order};this.$refs["infoForm"].validate((t=>{if(!t)return!1;this.axios.post("specification/update",e).then((e=>{0===e.data.errno?(this.$message({type:"success",message:"保存成功!"}),this.$router.go(-1)):this.$message({type:"error",message:"保存失败"})}))}))},specDelete(e,t){this.$confirm("确定要删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{this.axios.post("specification/delete",{id:t.id}).then((e=>{console.log(e.data),0===e.data.errno?(this.$message({type:"success",message:"删除成功!"}),this.$router.go(-1)):this.$message({type:"error",message:"删除失败，该型号下有商品!"})}))}))},goBackPage(){this.$router.go(-1)},getInfo(){if(console.log(this.infoForm.id),console.log(this.infoForm.id),console.log(this.infoForm.id),this.infoForm.id<=0)return!1;let e=this;this.axios.post("specification/detail",{id:e.infoForm.id}).then((t=>{let o=t.data.data;console.log(o),e.infoForm=o}))}},components:{},mounted(){this.infoForm.id=this.$route.query.id||0,this.getInfo()}}),a=s,n=o(1001),m=(0,n.Z)(a,r,i,!1,null,"83cba312",null),l=m.exports}}]);
//# sourceMappingURL=365.89e18dcc.js.map