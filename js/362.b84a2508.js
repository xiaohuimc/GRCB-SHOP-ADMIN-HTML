"use strict";(self["webpackChunkadmin"]=self["webpackChunkadmin"]||[]).push([[362],{98362:function(t,e,a){a.r(e),a.d(e,{default:function(){return r}});var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"content-page"},[e("div",{staticClass:"content-nav"},[e("el-breadcrumb",{staticClass:"breadcrumb",attrs:{separator:"/"}},[e("el-breadcrumb-item",[t._v("公告管理")])],1),e("div",{staticClass:"operation-nav"},[e("div",{staticStyle:{"margin-left":"10px"}}),e("el-button",{attrs:{type:"primary",icon:"plus"},on:{click:t.addNotice}},[t._v("添加公告")])],1)],1),e("div",{staticClass:"content-main"},[e("div",{staticClass:"form-table-box"},[e("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData,border:"",stripe:""}},[e("el-table-column",{attrs:{prop:"id",label:"ID",width:"60"}}),e("el-table-column",{attrs:{prop:"content",label:"内容"}}),e("el-table-column",{attrs:{prop:"end_time",label:"结束时间",width:"180"}}),e("el-table-column",{attrs:{prop:"enabled",label:"状态",width:"110px"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(0==e.row.is_delete?"启用中":"已到期下线")+" ")]}}])}),e("el-table-column",{attrs:{label:"操作",width:"220px"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("el-button",{attrs:{size:"small"},on:{click:function(e){return t.handleRowEdit(a.$index,a.row)}}},[t._v("编辑")]),e("el-button",{attrs:{plain:"",size:"small",type:"danger"},on:{click:function(e){return t.handleRowDelete(a.$index,a.row)}}},[t._v("删除 ")])]}}])})],1)],1)]),e("el-dialog",{attrs:{title:t.is_add?"添加":"编辑",visible:t.dialog},on:{"update:visible":function(e){t.dialog=e}}},[e("el-form",{attrs:{model:t.noticeData}},[e("el-form-item",{attrs:{label:"内容:","label-width":"120px"}},[e("el-input",{staticClass:"el-input",attrs:{"auto-complete":"off",placeholder:"请输入内容"},model:{value:t.noticeData.content,callback:function(e){t.$set(t.noticeData,"content",e)},expression:"noticeData.content"}})],1),e("el-form-item",{attrs:{label:"到期时间:","label-width":"120px"}},[e("el-date-picker",{attrs:{type:"datetime",placeholder:"选择日期时间","default-time":"23:59:59"},model:{value:t.noticeData.time,callback:function(e){t.$set(t.noticeData,"time",e)},expression:"noticeData.time"}})],1)],1),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(e){t.dialog=!1}}},[t._v("取 消")]),t.is_add?e("el-button",{attrs:{type:"primary"},on:{click:t.goNotice}},[t._v("确定添加")]):t._e(),t.is_add?t._e():e("el-button",{attrs:{type:"primary"},on:{click:t.updateNotice}},[t._v("确定修改")])],1)],1)],1)},s=[],o={data(){return{tableData:[],noticeData:{time:"",content:""},dialog:!1,is_add:!1}},methods:{test(){console.log(this.noticeData)},updateNotice(){return console.log(this.noticeData),""==this.noticeData.content?(this.$message({type:"error",message:"内容不能为空"}),!1):null==this.noticeData.time?(this.$message({type:"error",message:"过期时间不能为空"}),!1):(this.axios.post("notice/update",this.noticeData).then((t=>{0===t.data.errno?(this.$message({type:"success",message:"添加成功!"}),this.getList()):this.$message({type:"error",message:"添加失败"})})),void(this.dialog=!1))},goNotice(){return console.log(this.noticeData),""==this.noticeData.content?(this.$message({type:"error",message:"内容不能为空"}),!1):null==this.noticeData.time?(this.$message({type:"error",message:"过期时间不能为空"}),!1):(this.axios.post("notice/add",this.noticeData).then((t=>{0===t.data.errno?(this.$message({type:"success",message:"添加成功!"}),this.getList()):this.$message({type:"error",message:"添加失败"})})),void(this.dialog=!1))},addNotice(){this.dialog=!0,this.is_add=!0},handleRowEdit(t,e){this.noticeData.time=e.end_time,this.noticeData.content=e.content,this.noticeData.id=e.id,this.dialog=!0,this.is_add=!1},submitContent(t,e){this.axios.post("notice/updateContent",{id:e.id,content:e.content}).then((t=>{}))},handleRowDelete(t,e){this.$confirm("确定要删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{this.axios.post("notice/destory",{id:e.id}).then((t=>{console.log(t.data),0===t.data.errno&&(this.$message({type:"success",message:"删除成功!"}),this.getList())}))}))},getList(){this.axios.get("notice").then((t=>{this.tableData=t.data.data}))}},components:{},mounted(){this.getList()}},n=o,l=a(1001),c=(0,l.Z)(n,i,s,!1,null,"10805107",null),r=c.exports}}]);
//# sourceMappingURL=362.b84a2508.js.map