"use strict";(self["webpackChunkadmin"]=self["webpackChunkadmin"]||[]).push([[962],{83962:function(e,t,s){s.r(t),s.d(t,{default:function(){return m}});var r=function(){var e=this,t=e._self._c;return t("div",{staticClass:"login"},[t("div",{staticClass:"login-box"},[t("div",{staticClass:"logo"},[t("img",{attrs:{src:e.imageSrc}})]),t("div",{staticClass:"body"},[t("p",{staticClass:"tips"},[e._v("农商小店")]),t("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-position":"top"}},[t("el-form-item",{attrs:{label:"",prop:"username"}},[t("el-input",{attrs:{placeholder:"用户名"},model:{value:e.form.username,callback:function(t){e.$set(e.form,"username",t)},expression:"form.username"}})],1),t("el-form-item",{attrs:{label:"",prop:"password"}},[t("el-input",{attrs:{type:"password",placeholder:"密码"},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})],1),t("el-form-item",[t("el-button",{staticStyle:{width:"100%"},attrs:{type:"primary",loading:e.loading},on:{click:e.startLogin}},[e._v(" "+e._s(e.loading?"登录中...":"登录")+" ")])],1)],1)],1)])])},a=[],o=(s(57658),s(70636)),i={data(){return{root:"",form:{username:"",password:""},rules:{username:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,message:"密码不得低于6个字符",trigger:"blur"}]},loading:!1,imageSrc:`${origin}/static/images/loading2.gif`}},components:{},methods:{startLogin(){this.$refs["form"].validate((e=>{if(!e)return!1;this.loading=!0;let t=this.root;this.axios.post(t+"auth/login",{username:this.form.username,password:this.form.password}).then((e=>{let t=e.data;if(console.log(t),this.loading=!1,0!==e.data.errno)return this.$message({type:"error",message:t.errmsg}),!1;{console.log(e.data.data),localStorage.setItem("token",e.data.data.token),localStorage.setItem("userInfo",JSON.stringify(e.data.data.userInfo)),console.log(JSON.stringify(e.data.data.token)),console.log(JSON.stringify(e.data.data.userInfo)),this.$router.push({name:"welcome"});let t=navigator.userAgent,r=["Android","iPhone","Symbian","WindowsPhone","iPod","BlackBerry","Windows CE"],a=0;for(var s=0;s<r.length;s++)if(t.indexOf(r[s])>-1){a=1;break}console.log(a),1==a&&this.$router.push({name:"wap"})}})).catch((e=>{this.loading=!1}))}))}},mounted(){this.root=o.Z.rootUrl}},l=i,n=s(1001),d=(0,n.Z)(l,r,a,!1,null,null,null),m=d.exports}}]);
//# sourceMappingURL=962.7b0197e9.js.map