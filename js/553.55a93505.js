"use strict";(self["webpackChunkadmin"]=self["webpackChunkadmin"]||[]).push([[553],{57553:function(e,t,s){s.r(t),s.d(t,{default:function(){return d}});var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"com-image-drag"},[t("div",{staticClass:"button-list"},[e.drag_open?e._e():t("el-button",{staticClass:"operation-success",attrs:{disabled:e.banner_list.length<=1,type:"text",size:"small"},on:{click:e.openDrag}}),e.drag_open?t("el-button",{staticClass:"operation-success",attrs:{type:"text",size:"small"},on:{click:e.save}}):e._e(),e.drag_open?t("el-button",{staticClass:"operation-error",attrs:{type:"text",size:"small"},on:{click:e.cancle}}):e._e()],1),t("div",{staticClass:"image-list"},[t("div",{staticClass:"list-wrap"},[t("draggable",{attrs:{options:{animation:150,ghostClass:"sortable-ghost",chosenClass:"chosenClass",scroll:!0,scrollSensitivity:200}},model:{value:e.banner_list,callback:function(t){e.banner_list=t},expression:"banner_list"}},e._l(e.banner_list,(function(e,s){return t("div",{key:s,staticClass:"image-item",style:{backgroundImage:`url(${e.url})`}})})),0)],1),t("div",{directives:[{name:"show",rawName:"v-show",value:!e.drag_open,expression:"!drag_open"}],staticClass:"list-wrap"},[e._l(e.banner_list,(function(e,s){return t("div",{key:s,staticClass:"image-item",style:{backgroundImage:`url(${e.url})`},on:{mouseover:function(t){t.preventDefault(),e.is_hover=!0},mouseleave:function(t){t.preventDefault(),e.is_hover=!1}}},[t("div",{directives:[{name:"show",rawName:"v-show",value:!e.is_hover,expression:"!$item.is_hover"}],staticClass:"label"},[t("i",{staticClass:"el-icon-upload-success el-icon-check icon-success"})])])})),t("el-upload",{staticClass:"upload-machine",attrs:{"list-type":"picture-card",name:"file",disabled:e.drag_open,action:"https://up.qiniu.com/","on-success":e.onSuccess,"before-upload":e.beforeUpload,"show-file-list":!1,multiple:e.multiple,enctype:"multipart/form-data"}})],2)])])},a=[],n=(s(70636),s(44052)),l=s.n(n),o={props:{list:{type:Array},limit:{type:Number,default:0},multiple:{type:Boolean,default:!1},action:{type:Function,default:()=>{}},beforeUpload:{type:Function,default:()=>{}},onError:{type:Function,default:()=>{}},onSuccess:{type:Function,default:()=>{}}},data(){return{banner_list:[],file_list:[],drag_open:!1,infoForm:{}}},methods:{getInfo(){if(console.log(this.infoForm.id),this.infoForm.id<=0)return!1;let e=this;this.axios.get("goods/galleryList",{params:{id:e.infoForm.id}}).then((t=>{console.log(t.data),e.infoForm=t.data,e.banner_list=e.infoForm.data.map((function(e){let t={url:e.img_url,is_hover:!1};return t}))}))},openDrag(){this.file_list=JSON.parse(JSON.stringify(this.banner_list)),this.drag_open=!0},cancle(){this.banner_list=this.file_list,this.drag_open=!1},save(){this.drag_open=!1}},components:{draggable:l()},mounted(){this.infoForm.id=this.$route.query.id||0,this.getInfo()}},r=o,c=s(1001),u=(0,c.Z)(r,i,a,!1,null,"43ef5591",null),d=u.exports}}]);
//# sourceMappingURL=553.55a93505.js.map