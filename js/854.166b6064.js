"use strict";(self["webpackChunkadmin"]=self["webpackChunkadmin"]||[]).push([[854],{76854:function(e,t,a){a.r(t),a.d(t,{default:function(){return c}});var s=function(){var e=this,t=e._self._c;return t("div",{staticClass:"content-page"},[t("div",{staticClass:"content-nav"},[t("el-breadcrumb",{staticClass:"breadcrumb",attrs:{separator:"/"}},[t("el-breadcrumb-item",{attrs:{to:{name:"freight"}}},[e._v("运费模板")]),t("el-breadcrumb-item",[e._v(e._s(e.infoForm.id?"编辑偏远地区":"添加偏远地区"))])],1),t("div",{staticClass:"operation-nav"},[t("el-button",{attrs:{type:"primary",icon:"arrow-left"},on:{click:e.goBackPage}},[e._v("返回列表")])],1)],1),t("div",{staticClass:"content-main"},[t("div",{staticClass:"form-table-box"},[t("el-form",{ref:"infoForm",attrs:{rules:e.infoRules,model:e.infoForm,"label-width":"120px"}},[t("el-form-item",{attrs:{label:"名称",prop:"content"}},[t("el-input",{attrs:{placeholder:"请输入名称",autofocus:""},model:{value:e.infoForm.content,callback:function(t){e.$set(e.infoForm,"content",t)},expression:"infoForm.content"}})],1),t("el-form-item",{staticClass:"special-freight"},[t("div",{staticClass:"form-table-box"},[t("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,border:"",stripe:""}},[t("el-table-column",{attrs:{prop:"areaName",label:"偏远地区"}}),t("el-table-column",{attrs:{label:"操作",width:"160"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-button",{attrs:{size:"small",type:"primary",plain:""},on:{click:function(t){return e.handleRowEdit(a.$index,a.row)}}},[e._v("编辑地区 ")])]}}])})],1)],1)]),t("el-form-item",[e.infoForm.id?t("el-button",{attrs:{type:"primary"},on:{click:e.onSaveTemplate}},[e._v("确定保存")]):t("el-button",{attrs:{type:"primary"},on:{click:e.onAddTemplate}},[e._v("确定添加")]),t("el-button",{on:{click:e.goBackPage}},[e._v("返回列表")])],1)],1)],1)]),t("el-dialog",{attrs:{size:"tiny",title:"设置偏远地区",visible:e.specEditVisible},on:{"update:visible":function(t){e.specEditVisible=t}}},[t("el-form",{ref:"specForm",staticClass:"specFormDialig"},[t("el-form-item",{attrs:{label:"","label-width":"100px"}},[t("el-transfer",{attrs:{props:{key:"id",label:"name"},data:e.areaData,titles:["可选","已选"]},model:{value:e.selectedArea,callback:function(t){e.selectedArea=t},expression:"selectedArea"}})],1)],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.specEditVisible=!1}}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.updateArea}},[e._v("确定")])],1)],1)],1)},i=[],r=(a(57658),a(70636),{data(){return{areaData:[],selectedArea:[],specEditVisible:!1,infoForm:{id:0,content:""},infoRules:{content:[{required:!0,message:"请输入名称",trigger:"blur"}]},tableData:[{area:"",ghost:0}]}},methods:{testCallBack(){console.log(this.tableData)},updateArea(){let e=this.areaData,t=this.selectedArea;t=t.join(","),this.tableData[0].area=t;let a=this.selectedArea,s=[];for(const o in a)e.map((e=>e.id==a[o]?s.push(e.name):""));let i=this,r=s.join(",");i.tableData=[],i.tableData.push({area:t,areaName:r}),i.specEditVisible=!1},onSaveTemplate(){this.$refs["infoForm"].validate((e=>{if(!e)return!1;{let e=this.tableData[0];if(""==e.area)return this.$message({type:"error",message:"地区不能为空"}),!1;let t=this;this.axios.post("shipper/saveExceptArea",{table:t.tableData,info:t.infoForm}).then((e=>{0===e.data.errno?(this.$message({type:"success",message:"保存成功"}),t.getInfo()):this.$message({type:"error",message:"保存失败"})}))}}))},onAddTemplate(){console.log("哈哈哈"),this.$refs["infoForm"].validate((e=>{if(!e)return!1;{let e=this.tableData[0];if(""==e.area)return this.$message({type:"error",message:"地区不能为空"}),!1;let t=this;this.axios.post("shipper/addExceptArea",{table:t.tableData,info:t.infoForm}).then((e=>{0===e.data.errno?(this.$message({type:"success",message:"添加成功"}),this.$router.go(-1)):this.$message({type:"error",message:"添加失败"})}))}}))},test(){console.log(this.defaultData)},goBackPage(){this.$router.go(-1)},getAllAreaData(){let e=this;this.axios.post("shipper/getareadata").then((t=>{0===t.data.errno&&(e.areaData=t.data.data)}))},handleRowEdit(e,t){let a=this.tableData[0].area;this.selectedArea=a.split(",").map(Number);let s=a;s=s.split(",");this.areaData;this.specEditVisible=!0},getInfo(){if(this.infoForm.id<=0)return!1;let e=this;this.axios.post("shipper/exceptAreaDetail",{id:e.infoForm.id}).then((t=>{let a=t.data.data;e.infoForm=a,e.tableData=[{area:a.area,areaName:a.areaName}]}))}},components:{},mounted(){this.infoForm.id=this.$route.query.id||0,this.getInfo(),this.getAllAreaData()}}),o=r,l=a(1001),n=(0,l.Z)(o,s,i,!1,null,"eaa7187c",null),c=n.exports}}]);
//# sourceMappingURL=854.166b6064.js.map